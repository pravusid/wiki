<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>TypeScript HandBook: Module System | TIL wiki</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/wiki/assets/css/0.styles.28a8e502.css" as="style"><link rel="preload" href="/wiki/assets/js/app.014474a0.js" as="script"><link rel="preload" href="/wiki/assets/js/2.9f07087a.js" as="script"><link rel="preload" href="/wiki/assets/js/251.e299ed69.js" as="script"><link rel="prefetch" href="/wiki/assets/js/10.20c5bdc5.js"><link rel="prefetch" href="/wiki/assets/js/100.b678fd9f.js"><link rel="prefetch" href="/wiki/assets/js/101.6006d015.js"><link rel="prefetch" href="/wiki/assets/js/102.252cca99.js"><link rel="prefetch" href="/wiki/assets/js/103.aa24d829.js"><link rel="prefetch" href="/wiki/assets/js/104.879b4b38.js"><link rel="prefetch" href="/wiki/assets/js/105.f3f381ef.js"><link rel="prefetch" href="/wiki/assets/js/106.1a38285c.js"><link rel="prefetch" href="/wiki/assets/js/107.f396ef85.js"><link rel="prefetch" href="/wiki/assets/js/108.c770927c.js"><link rel="prefetch" href="/wiki/assets/js/109.ea8a81e2.js"><link rel="prefetch" href="/wiki/assets/js/11.11681293.js"><link rel="prefetch" href="/wiki/assets/js/110.0356d80b.js"><link rel="prefetch" href="/wiki/assets/js/111.cce1cd31.js"><link rel="prefetch" href="/wiki/assets/js/112.a9eae393.js"><link rel="prefetch" href="/wiki/assets/js/113.62d9dfeb.js"><link rel="prefetch" href="/wiki/assets/js/114.3836100f.js"><link rel="prefetch" href="/wiki/assets/js/115.bf0dda95.js"><link rel="prefetch" href="/wiki/assets/js/116.5a94dcdf.js"><link rel="prefetch" href="/wiki/assets/js/117.2bedb47f.js"><link rel="prefetch" href="/wiki/assets/js/118.4ad30358.js"><link rel="prefetch" href="/wiki/assets/js/119.1ba46fa5.js"><link rel="prefetch" href="/wiki/assets/js/12.efe209c8.js"><link rel="prefetch" href="/wiki/assets/js/120.289481b6.js"><link rel="prefetch" href="/wiki/assets/js/121.fc99eba2.js"><link rel="prefetch" href="/wiki/assets/js/122.3fa8890a.js"><link rel="prefetch" href="/wiki/assets/js/123.a62e430d.js"><link rel="prefetch" href="/wiki/assets/js/124.c5b3f829.js"><link rel="prefetch" href="/wiki/assets/js/125.2298431a.js"><link rel="prefetch" href="/wiki/assets/js/126.fdc6ec2f.js"><link rel="prefetch" href="/wiki/assets/js/127.b1e8a3c1.js"><link rel="prefetch" href="/wiki/assets/js/128.16b19ac4.js"><link rel="prefetch" href="/wiki/assets/js/129.20f95d13.js"><link rel="prefetch" href="/wiki/assets/js/13.f6c1fffd.js"><link rel="prefetch" href="/wiki/assets/js/130.993d3827.js"><link rel="prefetch" href="/wiki/assets/js/131.051f2a41.js"><link rel="prefetch" href="/wiki/assets/js/132.021fd15c.js"><link rel="prefetch" href="/wiki/assets/js/133.5af7aeb7.js"><link rel="prefetch" href="/wiki/assets/js/134.b1124063.js"><link rel="prefetch" href="/wiki/assets/js/135.daa7e917.js"><link rel="prefetch" href="/wiki/assets/js/136.df02a9d4.js"><link rel="prefetch" href="/wiki/assets/js/137.282bec4d.js"><link rel="prefetch" href="/wiki/assets/js/138.919e7479.js"><link rel="prefetch" href="/wiki/assets/js/139.c791df03.js"><link rel="prefetch" href="/wiki/assets/js/14.19011e4a.js"><link rel="prefetch" href="/wiki/assets/js/140.213801a7.js"><link rel="prefetch" href="/wiki/assets/js/141.fda1d3e3.js"><link rel="prefetch" href="/wiki/assets/js/142.0a422785.js"><link rel="prefetch" href="/wiki/assets/js/143.4a7d0541.js"><link rel="prefetch" href="/wiki/assets/js/144.44acac70.js"><link rel="prefetch" href="/wiki/assets/js/145.5bd799f2.js"><link rel="prefetch" href="/wiki/assets/js/146.aa4af779.js"><link rel="prefetch" href="/wiki/assets/js/147.59843b61.js"><link rel="prefetch" href="/wiki/assets/js/148.2633dc0b.js"><link rel="prefetch" href="/wiki/assets/js/149.48faafe2.js"><link rel="prefetch" href="/wiki/assets/js/15.c937e7cc.js"><link rel="prefetch" href="/wiki/assets/js/150.8ce04d91.js"><link rel="prefetch" href="/wiki/assets/js/151.52f6e3ad.js"><link rel="prefetch" href="/wiki/assets/js/152.14f671b9.js"><link rel="prefetch" href="/wiki/assets/js/153.4591d520.js"><link rel="prefetch" href="/wiki/assets/js/154.6b99887b.js"><link rel="prefetch" href="/wiki/assets/js/155.e317662c.js"><link rel="prefetch" href="/wiki/assets/js/156.a0bd3c31.js"><link rel="prefetch" href="/wiki/assets/js/157.b6651ff2.js"><link rel="prefetch" href="/wiki/assets/js/158.e6ccb74d.js"><link rel="prefetch" href="/wiki/assets/js/159.92a6c692.js"><link rel="prefetch" href="/wiki/assets/js/16.0f0841e4.js"><link rel="prefetch" href="/wiki/assets/js/160.f4a77408.js"><link rel="prefetch" href="/wiki/assets/js/161.c4ae42ce.js"><link rel="prefetch" href="/wiki/assets/js/162.fc3871e0.js"><link rel="prefetch" href="/wiki/assets/js/163.a6270252.js"><link rel="prefetch" href="/wiki/assets/js/164.7cf93fcf.js"><link rel="prefetch" href="/wiki/assets/js/165.0bf74cba.js"><link rel="prefetch" href="/wiki/assets/js/166.64e3f53f.js"><link rel="prefetch" href="/wiki/assets/js/167.33a189c3.js"><link rel="prefetch" href="/wiki/assets/js/168.a75c8fe9.js"><link rel="prefetch" href="/wiki/assets/js/169.985feb64.js"><link rel="prefetch" href="/wiki/assets/js/17.024a488f.js"><link rel="prefetch" href="/wiki/assets/js/170.05353f74.js"><link rel="prefetch" href="/wiki/assets/js/171.94f98167.js"><link rel="prefetch" href="/wiki/assets/js/172.a4d6ee09.js"><link rel="prefetch" href="/wiki/assets/js/173.7b317555.js"><link rel="prefetch" href="/wiki/assets/js/174.6ce7b6fc.js"><link rel="prefetch" href="/wiki/assets/js/175.19e8cad2.js"><link rel="prefetch" href="/wiki/assets/js/176.f4df5266.js"><link rel="prefetch" href="/wiki/assets/js/177.bf94edc5.js"><link rel="prefetch" href="/wiki/assets/js/178.7917908b.js"><link rel="prefetch" href="/wiki/assets/js/179.a3f42093.js"><link rel="prefetch" href="/wiki/assets/js/18.2c408eb7.js"><link rel="prefetch" href="/wiki/assets/js/180.1a787077.js"><link rel="prefetch" href="/wiki/assets/js/181.9bf26f2f.js"><link rel="prefetch" href="/wiki/assets/js/182.68c4d1c2.js"><link rel="prefetch" href="/wiki/assets/js/183.c1615778.js"><link rel="prefetch" href="/wiki/assets/js/184.36148b94.js"><link rel="prefetch" href="/wiki/assets/js/185.5f168e22.js"><link rel="prefetch" href="/wiki/assets/js/186.6cdbc10d.js"><link rel="prefetch" href="/wiki/assets/js/187.9e6841f8.js"><link rel="prefetch" href="/wiki/assets/js/188.8cc93f0c.js"><link rel="prefetch" href="/wiki/assets/js/189.e1c674e9.js"><link rel="prefetch" href="/wiki/assets/js/19.cd32b18f.js"><link rel="prefetch" href="/wiki/assets/js/190.a1b540d0.js"><link rel="prefetch" href="/wiki/assets/js/191.a042b524.js"><link rel="prefetch" href="/wiki/assets/js/192.f450653a.js"><link rel="prefetch" href="/wiki/assets/js/193.23da83d4.js"><link rel="prefetch" href="/wiki/assets/js/194.fcefe99a.js"><link rel="prefetch" href="/wiki/assets/js/195.d5b5ebe8.js"><link rel="prefetch" href="/wiki/assets/js/196.2d0a372e.js"><link rel="prefetch" href="/wiki/assets/js/197.cd8c6559.js"><link rel="prefetch" href="/wiki/assets/js/198.fbf9e54c.js"><link rel="prefetch" href="/wiki/assets/js/199.ac4b7834.js"><link rel="prefetch" href="/wiki/assets/js/20.2b975e85.js"><link rel="prefetch" href="/wiki/assets/js/200.0833dd73.js"><link rel="prefetch" href="/wiki/assets/js/201.57a76573.js"><link rel="prefetch" href="/wiki/assets/js/202.f656f85d.js"><link rel="prefetch" href="/wiki/assets/js/203.a7de0b33.js"><link rel="prefetch" href="/wiki/assets/js/204.c98ffe50.js"><link rel="prefetch" href="/wiki/assets/js/205.248f9ae1.js"><link rel="prefetch" href="/wiki/assets/js/206.2934d002.js"><link rel="prefetch" href="/wiki/assets/js/207.0802de14.js"><link rel="prefetch" href="/wiki/assets/js/208.8fbe1262.js"><link rel="prefetch" href="/wiki/assets/js/209.8b37822f.js"><link rel="prefetch" href="/wiki/assets/js/21.cbabf94d.js"><link rel="prefetch" href="/wiki/assets/js/210.0b88f7a7.js"><link rel="prefetch" href="/wiki/assets/js/211.a9217091.js"><link rel="prefetch" href="/wiki/assets/js/212.a773a0d7.js"><link rel="prefetch" href="/wiki/assets/js/213.c1b7da86.js"><link rel="prefetch" href="/wiki/assets/js/214.a4a31170.js"><link rel="prefetch" href="/wiki/assets/js/215.fae63edd.js"><link rel="prefetch" href="/wiki/assets/js/216.e6409b6c.js"><link rel="prefetch" href="/wiki/assets/js/217.0154fb51.js"><link rel="prefetch" href="/wiki/assets/js/218.edc304a9.js"><link rel="prefetch" href="/wiki/assets/js/219.7411f82d.js"><link rel="prefetch" href="/wiki/assets/js/22.710d7a40.js"><link rel="prefetch" href="/wiki/assets/js/220.f68b9631.js"><link rel="prefetch" href="/wiki/assets/js/221.688e81e7.js"><link rel="prefetch" href="/wiki/assets/js/222.dc41f6dd.js"><link rel="prefetch" href="/wiki/assets/js/223.87f48544.js"><link rel="prefetch" href="/wiki/assets/js/224.c5fe9f5a.js"><link rel="prefetch" href="/wiki/assets/js/225.7c0ee38a.js"><link rel="prefetch" href="/wiki/assets/js/226.c7d6cab8.js"><link rel="prefetch" href="/wiki/assets/js/227.ee3db4e4.js"><link rel="prefetch" href="/wiki/assets/js/228.43886f71.js"><link rel="prefetch" href="/wiki/assets/js/229.4885ad71.js"><link rel="prefetch" href="/wiki/assets/js/23.0e320e5c.js"><link rel="prefetch" href="/wiki/assets/js/230.933fe4af.js"><link rel="prefetch" href="/wiki/assets/js/231.6e7eac24.js"><link rel="prefetch" href="/wiki/assets/js/232.fec0968e.js"><link rel="prefetch" href="/wiki/assets/js/233.6e8eb4fe.js"><link rel="prefetch" href="/wiki/assets/js/234.82dcd8be.js"><link rel="prefetch" href="/wiki/assets/js/235.542bed81.js"><link rel="prefetch" href="/wiki/assets/js/236.a0467cf6.js"><link rel="prefetch" href="/wiki/assets/js/237.d154d1b6.js"><link rel="prefetch" href="/wiki/assets/js/238.be3ef998.js"><link rel="prefetch" href="/wiki/assets/js/239.512245ea.js"><link rel="prefetch" href="/wiki/assets/js/24.6dff29eb.js"><link rel="prefetch" href="/wiki/assets/js/240.8f6997ec.js"><link rel="prefetch" href="/wiki/assets/js/241.2cca9a27.js"><link rel="prefetch" href="/wiki/assets/js/242.e7fae29d.js"><link rel="prefetch" href="/wiki/assets/js/243.50a55c84.js"><link rel="prefetch" href="/wiki/assets/js/244.f0275b98.js"><link rel="prefetch" href="/wiki/assets/js/245.f6500c55.js"><link rel="prefetch" href="/wiki/assets/js/246.de84608b.js"><link rel="prefetch" href="/wiki/assets/js/247.956827fb.js"><link rel="prefetch" href="/wiki/assets/js/248.7a3cf72f.js"><link rel="prefetch" href="/wiki/assets/js/249.3984c7c7.js"><link rel="prefetch" href="/wiki/assets/js/25.3cc27a28.js"><link rel="prefetch" href="/wiki/assets/js/250.d217696b.js"><link rel="prefetch" href="/wiki/assets/js/252.8642ad40.js"><link rel="prefetch" href="/wiki/assets/js/253.496656f2.js"><link rel="prefetch" href="/wiki/assets/js/254.38b852a7.js"><link rel="prefetch" href="/wiki/assets/js/255.ee375e98.js"><link rel="prefetch" href="/wiki/assets/js/256.cda8b6bd.js"><link rel="prefetch" href="/wiki/assets/js/257.32f553f5.js"><link rel="prefetch" href="/wiki/assets/js/258.d40469ee.js"><link rel="prefetch" href="/wiki/assets/js/259.ad391215.js"><link rel="prefetch" href="/wiki/assets/js/26.a7d2bf7c.js"><link rel="prefetch" href="/wiki/assets/js/260.8004bb66.js"><link rel="prefetch" href="/wiki/assets/js/261.6eb20cc3.js"><link rel="prefetch" href="/wiki/assets/js/262.439e5ea0.js"><link rel="prefetch" href="/wiki/assets/js/263.430c6dfd.js"><link rel="prefetch" href="/wiki/assets/js/264.bf9b907d.js"><link rel="prefetch" href="/wiki/assets/js/265.014491cb.js"><link rel="prefetch" href="/wiki/assets/js/266.d00fe19b.js"><link rel="prefetch" href="/wiki/assets/js/267.4bfa4f68.js"><link rel="prefetch" href="/wiki/assets/js/268.9829b097.js"><link rel="prefetch" href="/wiki/assets/js/269.9e58e95c.js"><link rel="prefetch" href="/wiki/assets/js/27.bb82b11b.js"><link rel="prefetch" href="/wiki/assets/js/28.4bd13ed5.js"><link rel="prefetch" href="/wiki/assets/js/29.7d069226.js"><link rel="prefetch" href="/wiki/assets/js/3.e52888e0.js"><link rel="prefetch" href="/wiki/assets/js/30.6d2f638c.js"><link rel="prefetch" href="/wiki/assets/js/31.94f12013.js"><link rel="prefetch" href="/wiki/assets/js/32.18877b9d.js"><link rel="prefetch" href="/wiki/assets/js/33.04c5614d.js"><link rel="prefetch" href="/wiki/assets/js/34.ab60def0.js"><link rel="prefetch" href="/wiki/assets/js/35.bc00430a.js"><link rel="prefetch" href="/wiki/assets/js/36.62c0b6fe.js"><link rel="prefetch" href="/wiki/assets/js/37.4f81e690.js"><link rel="prefetch" href="/wiki/assets/js/38.f9d5bbb0.js"><link rel="prefetch" href="/wiki/assets/js/39.61760a7e.js"><link rel="prefetch" href="/wiki/assets/js/4.d15f9ece.js"><link rel="prefetch" href="/wiki/assets/js/40.aa2e9de2.js"><link rel="prefetch" href="/wiki/assets/js/41.ebf4b176.js"><link rel="prefetch" href="/wiki/assets/js/42.81be288d.js"><link rel="prefetch" href="/wiki/assets/js/43.05239619.js"><link rel="prefetch" href="/wiki/assets/js/44.76dbd0c8.js"><link rel="prefetch" href="/wiki/assets/js/45.fd8dc247.js"><link rel="prefetch" href="/wiki/assets/js/46.d8beb992.js"><link rel="prefetch" href="/wiki/assets/js/47.36c8fa29.js"><link rel="prefetch" href="/wiki/assets/js/48.1b129077.js"><link rel="prefetch" href="/wiki/assets/js/49.b101ecfa.js"><link rel="prefetch" href="/wiki/assets/js/5.1529c6e3.js"><link rel="prefetch" href="/wiki/assets/js/50.847d6587.js"><link rel="prefetch" href="/wiki/assets/js/51.90c582fc.js"><link rel="prefetch" href="/wiki/assets/js/52.e3e0f616.js"><link rel="prefetch" href="/wiki/assets/js/53.27e3147a.js"><link rel="prefetch" href="/wiki/assets/js/54.02281c03.js"><link rel="prefetch" href="/wiki/assets/js/55.6c403381.js"><link rel="prefetch" href="/wiki/assets/js/56.04c26155.js"><link rel="prefetch" href="/wiki/assets/js/57.19dd2834.js"><link rel="prefetch" href="/wiki/assets/js/58.d710292a.js"><link rel="prefetch" href="/wiki/assets/js/59.6a40c71a.js"><link rel="prefetch" href="/wiki/assets/js/6.8a166ea6.js"><link rel="prefetch" href="/wiki/assets/js/60.afeb6cbe.js"><link rel="prefetch" href="/wiki/assets/js/61.62a5873a.js"><link rel="prefetch" href="/wiki/assets/js/62.2322a17f.js"><link rel="prefetch" href="/wiki/assets/js/63.ac7905a7.js"><link rel="prefetch" href="/wiki/assets/js/64.f2e0ec60.js"><link rel="prefetch" href="/wiki/assets/js/65.46570977.js"><link rel="prefetch" href="/wiki/assets/js/66.da672172.js"><link rel="prefetch" href="/wiki/assets/js/67.687b20e5.js"><link rel="prefetch" href="/wiki/assets/js/68.dd63d4f9.js"><link rel="prefetch" href="/wiki/assets/js/69.835f4af1.js"><link rel="prefetch" href="/wiki/assets/js/7.fa0bdd91.js"><link rel="prefetch" href="/wiki/assets/js/70.312241d3.js"><link rel="prefetch" href="/wiki/assets/js/71.f5fe767d.js"><link rel="prefetch" href="/wiki/assets/js/72.234920ff.js"><link rel="prefetch" href="/wiki/assets/js/73.226f2ffc.js"><link rel="prefetch" href="/wiki/assets/js/74.7ca81169.js"><link rel="prefetch" href="/wiki/assets/js/75.850c6c52.js"><link rel="prefetch" href="/wiki/assets/js/76.cffb51be.js"><link rel="prefetch" href="/wiki/assets/js/77.782bfbdc.js"><link rel="prefetch" href="/wiki/assets/js/78.483f9387.js"><link rel="prefetch" href="/wiki/assets/js/79.ed859b99.js"><link rel="prefetch" href="/wiki/assets/js/8.3785ffa9.js"><link rel="prefetch" href="/wiki/assets/js/80.a96a01ca.js"><link rel="prefetch" href="/wiki/assets/js/81.5747466c.js"><link rel="prefetch" href="/wiki/assets/js/82.b5b7433f.js"><link rel="prefetch" href="/wiki/assets/js/83.8eb14866.js"><link rel="prefetch" href="/wiki/assets/js/84.7d0c6dd9.js"><link rel="prefetch" href="/wiki/assets/js/85.1909916a.js"><link rel="prefetch" href="/wiki/assets/js/86.41bb3f76.js"><link rel="prefetch" href="/wiki/assets/js/87.b5e8884f.js"><link rel="prefetch" href="/wiki/assets/js/88.8889c269.js"><link rel="prefetch" href="/wiki/assets/js/89.a739ffcc.js"><link rel="prefetch" href="/wiki/assets/js/9.df078b79.js"><link rel="prefetch" href="/wiki/assets/js/90.4c38d91d.js"><link rel="prefetch" href="/wiki/assets/js/91.63838d87.js"><link rel="prefetch" href="/wiki/assets/js/92.2747d91f.js"><link rel="prefetch" href="/wiki/assets/js/93.46f1e9b6.js"><link rel="prefetch" href="/wiki/assets/js/94.c8037305.js"><link rel="prefetch" href="/wiki/assets/js/95.3b67229c.js"><link rel="prefetch" href="/wiki/assets/js/96.01d760b1.js"><link rel="prefetch" href="/wiki/assets/js/97.78587328.js"><link rel="prefetch" href="/wiki/assets/js/98.8c40bc1b.js"><link rel="prefetch" href="/wiki/assets/js/99.2449771e.js">
    <link rel="stylesheet" href="/wiki/assets/css/0.styles.28a8e502.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/wiki/" class="home-link router-link-active"><!----> <span class="site-name">TIL wiki</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/pravusid/TIL" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/pravusid/TIL" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>TypeScript HandBook: Module System</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wiki/TypeScript/typescript-handbook-module-system.html#modules" class="sidebar-link">Modules</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/wiki/TypeScript/typescript-handbook-module-system.html#export" class="sidebar-link">Export</a></li><li class="sidebar-sub-header"><a href="/wiki/TypeScript/typescript-handbook-module-system.html#import" class="sidebar-link">Import</a></li><li class="sidebar-sub-header"><a href="/wiki/TypeScript/typescript-handbook-module-system.html#default-exports" class="sidebar-link">Default exports</a></li><li class="sidebar-sub-header"><a href="/wiki/TypeScript/typescript-handbook-module-system.html#export-and-import-require" class="sidebar-link">export = and import = require()</a></li><li class="sidebar-sub-header"><a href="/wiki/TypeScript/typescript-handbook-module-system.html#code-generation-for-modules" class="sidebar-link">Code Generation for Modules</a></li><li class="sidebar-sub-header"><a href="/wiki/TypeScript/typescript-handbook-module-system.html#working-with-other-javascript-libraries" class="sidebar-link">Working with Other JavaScript Libraries</a></li><li class="sidebar-sub-header"><a href="/wiki/TypeScript/typescript-handbook-module-system.html#guidance-for-structuring-modules" class="sidebar-link">Guidance for structuring modules</a></li></ul></li><li><a href="/wiki/TypeScript/typescript-handbook-module-system.html#namespaces" class="sidebar-link">Namespaces</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/wiki/TypeScript/typescript-handbook-module-system.html#네임스페이스-소개" class="sidebar-link">네임스페이스 소개</a></li><li class="sidebar-sub-header"><a href="/wiki/TypeScript/typescript-handbook-module-system.html#namespacing" class="sidebar-link">Namespacing</a></li><li class="sidebar-sub-header"><a href="/wiki/TypeScript/typescript-handbook-module-system.html#splitting-across-files-multi-file-namespaces" class="sidebar-link">Splitting Across Files (Multi-file namespaces)</a></li><li class="sidebar-sub-header"><a href="/wiki/TypeScript/typescript-handbook-module-system.html#aliases" class="sidebar-link">Aliases</a></li><li class="sidebar-sub-header"><a href="/wiki/TypeScript/typescript-handbook-module-system.html#네임스페이스와-javascript-libraries" class="sidebar-link">네임스페이스와 JavaScript Libraries</a></li></ul></li><li><a href="/wiki/TypeScript/typescript-handbook-module-system.html#namespaces-and-modules" class="sidebar-link">Namespaces and Modules</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/wiki/TypeScript/typescript-handbook-module-system.html#using-namespaces" class="sidebar-link">Using Namespaces</a></li><li class="sidebar-sub-header"><a href="/wiki/TypeScript/typescript-handbook-module-system.html#using-modules" class="sidebar-link">Using Modules</a></li><li class="sidebar-sub-header"><a href="/wiki/TypeScript/typescript-handbook-module-system.html#네임스페이스와-모듈의-함정" class="sidebar-link">네임스페이스와 모듈의 함정</a></li></ul></li><li><a href="/wiki/TypeScript/typescript-handbook-module-system.html#module-resolution" class="sidebar-link">Module Resolution</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/wiki/TypeScript/typescript-handbook-module-system.html#relative-vs-non-relative-module-imports" class="sidebar-link">Relative vs. Non-relative module imports</a></li><li class="sidebar-sub-header"><a href="/wiki/TypeScript/typescript-handbook-module-system.html#module-resolution-strategies" class="sidebar-link">Module Resolution Strategies</a></li><li class="sidebar-sub-header"><a href="/wiki/TypeScript/typescript-handbook-module-system.html#additional-module-resolution-flags" class="sidebar-link">Additional module resolution flags</a></li></ul></li><li><a href="/wiki/TypeScript/typescript-handbook-module-system.html#declaration-merging-선언-병합" class="sidebar-link">Declaration Merging (선언 병합)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/wiki/TypeScript/typescript-handbook-module-system.html#introduction-of-declaration-merging" class="sidebar-link">Introduction of Declaration Merging</a></li><li class="sidebar-sub-header"><a href="/wiki/TypeScript/typescript-handbook-module-system.html#basic-concepts" class="sidebar-link">Basic Concepts</a></li><li class="sidebar-sub-header"><a href="/wiki/TypeScript/typescript-handbook-module-system.html#merging-interfaces" class="sidebar-link">Merging Interfaces</a></li><li class="sidebar-sub-header"><a href="/wiki/TypeScript/typescript-handbook-module-system.html#merging-namespaces" class="sidebar-link">Merging Namespaces</a></li><li class="sidebar-sub-header"><a href="/wiki/TypeScript/typescript-handbook-module-system.html#merging-namespaces-with-classes-functions-and-enums" class="sidebar-link">Merging Namespaces with Classes, Functions, and Enums</a></li><li class="sidebar-sub-header"><a href="/wiki/TypeScript/typescript-handbook-module-system.html#disallowed-merges" class="sidebar-link">Disallowed Merges</a></li><li class="sidebar-sub-header"><a href="/wiki/TypeScript/typescript-handbook-module-system.html#module-augmentation" class="sidebar-link">Module Augmentation</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="typescript-handbook-module-system"><a href="#typescript-handbook-module-system" class="header-anchor">#</a> TypeScript HandBook: Module System</h1> <h2 id="modules"><a href="#modules" class="header-anchor">#</a> Modules</h2> <p>ECMAScript 2015부터 JavaScript에는 모듈 개념이 있고, TypeScript도 개념을 공유한다.</p> <p>모듈은 전역 스코프가 아닌 자체 스코프에서 실행된다.
이는 모듈에서 선언된 변수, 함수, 클래스 등을 <code>export</code> 양식을 사용하여 명시적으로 내보내지 않으면 외부에서 볼 수 없음을 의미한다.</p> <p>반대로 다른 모듈에서 내보낸 변수, 함수, 클래스, 인터페이스 등을 사용하려면 <code>import</code> 양식을 사용하여야 한다.</p> <p>모듈은 선언적이므로 모듈간의 관계는 파일 수준의 <code>import</code>, <code>export</code>로 지정된다.</p> <p>모듈은 모듈 로더를 사용하여 서로를 불러온다.
런타임에서 모듈 로더는 모듈을 실행하기 전 모듈의 모든 종속성을 찾아 실행한다.</p> <p>잘 알려진 모듈 로더는 Node.js의 CommonJS 모듈 로더와 웹 어플리케이션의 require.js이다.</p> <p>TypeScript에서는 ES6와 마찬가지로 top-level import 또는 export가 포함된 파일을 모듈로 간주한다.
반대로, top-level import 또는 export가 없는 파일은 전역 스코프에서 사용할 수 있는 스크립트로 취급된다.</p> <h3 id="export"><a href="#export" class="header-anchor">#</a> Export</h3> <h4 id="exporting-a-declaration"><a href="#exporting-a-declaration" class="header-anchor">#</a> Exporting a declaration</h4> <p><code>export</code> 키워드를 추가하여 모든 선언(변수, 함수, 클래스, 타입 별칭, 인터페이스 ...)을 내보낼 수 있다.</p> <p><code>Validation.ts</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">StringValidator</span> <span class="token punctuation">{</span>
  <span class="token function">isAcceptable</span><span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>ZipCodeValidator.ts</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">const</span> numberRegexp <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[0-9]+$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ZipCodeValidator</span> <span class="token keyword">implements</span> <span class="token class-name">StringValidator</span> <span class="token punctuation">{</span>
  <span class="token function">isAcceptable</span><span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> s<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">5</span> <span class="token operator">&amp;&amp;</span> numberRegexp<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="export-statements"><a href="#export-statements" class="header-anchor">#</a> Export statements</h4> <p>export문을 사용할 때 편리하게 다른이름을 지정할 수 있다</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">class</span> <span class="token class-name">ZipCodeValidator</span> <span class="token keyword">implements</span> <span class="token class-name">StringValidator</span> <span class="token punctuation">{</span>
  <span class="token function">isAcceptable</span><span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> s<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">5</span> <span class="token operator">&amp;&amp;</span> numberRegexp<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> ZipCodeValidator <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> ZipCodeValidator <span class="token keyword">as</span> mainValidator <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="re-exports"><a href="#re-exports" class="header-anchor">#</a> Re-exports</h4> <p>종종 모듈은 다른 모듈을 확장하고 부분적으로 일부기능을 노출한다.
Re-exports는 대상 모듈을 로컬에 불러오거나 변수로 선언하지 않고 내보내기를 한다.</p> <p><code>ParseIntBasedZipCodeValidator.ts</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ParseIntBasedZipCodeValidator</span> <span class="token punctuation">{</span>
  <span class="token function">isAcceptable</span><span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> s<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">5</span> <span class="token operator">&amp;&amp;</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> s<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// Export original validator but rename it</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span>
  ZipCodeValidator <span class="token keyword">as</span> RegExpBasedZipCodeValidator
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./ZipCodeValidator&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>선택적으로 모듈은 하나 이상의 모듈을 감싸고 결합한 뒤 <code>export * from &quot;module&quot;</code> 문법을 통해 내보낼수 있다.</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">&quot;./StringValidator&quot;</span><span class="token punctuation">;</span> <span class="token comment">// exports interface 'StringValidator'</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">&quot;./LettersOnlyValidator&quot;</span><span class="token punctuation">;</span> <span class="token comment">// exports class 'LettersOnlyValidator'</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">&quot;./ZipCodeValidator&quot;</span><span class="token punctuation">;</span> <span class="token comment">// exports class 'ZipCodeValidator'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="import"><a href="#import" class="header-anchor">#</a> Import</h3> <p>내보내기 선언을 불러오려면 아래의 <code>import</code> 중 하나를 사용한다</p> <h4 id="import-a-single-export-from-a-module"><a href="#import-a-single-export-from-a-module" class="header-anchor">#</a> Import a single export from a module</h4> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ZipCodeValidator <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./ZipCodeValidator&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> myValidator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ZipCodeValidator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>import를 하면서 이름을 다시 지정할 수 있다</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ZipCodeValidator <span class="token keyword">as</span> <span class="token constant">ZCV</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./ZipCodeValidator&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> myValidator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">ZCV</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="import-the-entire-module-into-a-single-variable-and-use-it-to-access-the-module-exports"><a href="#import-the-entire-module-into-a-single-variable-and-use-it-to-access-the-module-exports" class="header-anchor">#</a> Import the entire module into a single variable, and use it to access the module exports</h4> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> validator <span class="token keyword">from</span> <span class="token string">&quot;./ZipCodeValidator&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> myValidator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">validator</span><span class="token punctuation">.</span><span class="token function">ZipCodeValidator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="import-a-module-for-side-effects-only"><a href="#import-a-module-for-side-effects-only" class="header-anchor">#</a> Import a module for side-effects only</h4> <p>권장 사항은 아니지만 일부 모듈은 다른 모듈에서 사용할 수 있는 일부 전역 상태를 설정한다.
이런 모듈에는 내보내기가 없거나 모듈 사용처에서 모듈의 내보내기를 사용하지 않는 경우이다.</p> <p>이런 경우 다음과 같이 불러오기를 사용한다.</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token string">&quot;./my-module.js&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="default-exports"><a href="#default-exports" class="header-anchor">#</a> Default exports</h3> <p>각 모듈은 선택적으로 <code>default</code> 키워드를 통해 기본 내보내기를 할 수 있다.
모듈당 하나의 기본 내보내기만 할 수 있다.</p> <p><code>JQuery.d.ts</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">declare</span> <span class="token keyword">let</span> $<span class="token operator">:</span> JQuery<span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> $<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>App.ts</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> $ <span class="token keyword">from</span> <span class="token string">&quot;JQuery&quot;</span><span class="token punctuation">;</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;button.continue&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token string">&quot;Next Step...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>클래스나 함수 선언은 기본 내보내기로 직접 작성될 수 있다. 이름 선언은 선택사항이다.</p> <p><code>ZipCodeValidator.ts</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">ZipCodeValidator</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> numberRegexp <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[0-9]+$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
  <span class="token function">isAcceptable</span><span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> s<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">5</span> <span class="token operator">&amp;&amp;</span> ZipCodeValidator<span class="token punctuation">.</span>numberRegexp<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>Test.ts</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> validator <span class="token keyword">from</span> <span class="token string">&quot;./ZipCodeValidator&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> myValidator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">validator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>또는</p> <p><code>StaticZipCodeValidator.ts</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">const</span> numberRegexp <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[0-9]+$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> s<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">5</span> <span class="token operator">&amp;&amp;</span> numberRegexp<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>Test.ts</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> validate <span class="token keyword">from</span> <span class="token string">&quot;./StaticZipCodeValidator&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> myValidator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">validator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>기본 내보내기는 단순히 값일 수도 있다</p> <p><code>OneTwoThree.ts</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token string">&quot;123&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>Log.ts</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> num <span class="token keyword">from</span> <span class="token string">&quot;./OneTwoThree&quot;</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;123&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="export-and-import-require"><a href="#export-and-import-require" class="header-anchor">#</a> export = and import = require()</h3> <p>CommonJS와 AMD 모두 일반적으로 모듈의 모든 내보내기를 포함하는 내보내기 객체 개념이 있다.</p> <p>또한 내보내기 객체를 사용자 지정 단일 객체로 바꾸는 기능도 지원한다.
기본 내보내기는 이 동작을 대신하는 역할을 한다. 그러나 앞의 두 동작은 호환되지 않는다.</p> <p>TypeScript는 일반적인 CommonJS 및 AMD 워크플로우를 모델링하기 위해 <code>export =</code>을 지원한다.</p> <p><code>export =</code> 문법은 모듈에서 내보낼 단일 객체를 지정한다. 객체는 클래스, 인터페이스, 네임 스페이스, 함수, Enum이 될 수 있다.</p> <p><code>export =</code>을 사용해 내보낸 모듈을 가져올 때 TypeScript 고유의 <code>import module = require(&quot;module&quot;)</code>을 사용해야 한다.</p> <p><code>ZipCodeValidator.ts</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">let</span> numberRegexp <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[0-9]+$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">ZipCodeValidator</span> <span class="token punctuation">{</span>
  <span class="token function">isAcceptable</span><span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> s<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">5</span> <span class="token operator">&amp;&amp;</span> numberRegexp<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token operator">=</span> ZipCodeValidator<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><code>Test.ts</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> zip <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&quot;./ZipCodeValidator&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> validator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">zip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="code-generation-for-modules"><a href="#code-generation-for-modules" class="header-anchor">#</a> Code Generation for Modules</h3> <p>컴파일하는 동안 지정된 모듈 타겟에 따라 컴파일러는 Node.js(CommonJS), require.js(AMD), UMD, SystemJS 또는
ES6 모듈로드 시스템에 적합한 코드를 생성한다.</p> <p><code>SimpleModule.ts</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> m <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&quot;mod&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">let</span> t <span class="token operator">=</span> m<span class="token punctuation">.</span>something <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>AMD / RequireJS SimpleModule.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;require&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;exports&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;./mod&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">require<span class="token punctuation">,</span> exports<span class="token punctuation">,</span> mod_1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  exports<span class="token punctuation">.</span>t <span class="token operator">=</span> mod_1<span class="token punctuation">.</span>something <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>CommonJS / Node SimpleModule.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> mod_1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./mod&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
exports<span class="token punctuation">.</span>t <span class="token operator">=</span> mod_1<span class="token punctuation">.</span>something <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>UMD SimpleModule.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">factory</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> module <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> module<span class="token punctuation">.</span>exports <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> v <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span>require<span class="token punctuation">,</span> exports<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>v <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> module<span class="token punctuation">.</span>exports <span class="token operator">=</span> v<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> define <span class="token operator">===</span> <span class="token string">&quot;function&quot;</span> <span class="token operator">&amp;&amp;</span> define<span class="token punctuation">.</span>amd<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;require&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;exports&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;./mod&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> factory<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">require<span class="token punctuation">,</span> exports</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> mod_1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./mod&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  exports<span class="token punctuation">.</span>t <span class="token operator">=</span> mod_1<span class="token punctuation">.</span>something <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><code>System SimpleModule.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>System<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;./mod&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">exports_1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> mod_1<span class="token punctuation">;</span>
  <span class="token keyword">var</span> t<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    setters<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">mod_1_1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mod_1 <span class="token operator">=</span> mod_1_1<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token function-variable function">execute</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">exports_1</span><span class="token punctuation">(</span><span class="token string">&quot;t&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>t <span class="token operator">=</span> mod_1<span class="token punctuation">.</span>something <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><code>Native ECMAScript 2015 modules SimpleModule.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> something <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./mod&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">var</span> t <span class="token operator">=</span> something <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="working-with-other-javascript-libraries"><a href="#working-with-other-javascript-libraries" class="header-anchor">#</a> Working with Other JavaScript Libraries</h3> <p>타입스크립트로 작성되지 않은 라이브러리의 형태를 기술하려면, 라이브러리가 노출하는 API를 선언해야 한다.</p> <h4 id="ambient-modules"><a href="#ambient-modules" class="header-anchor">#</a> Ambient Modules</h4> <p>최상위 수준의 내보내기 선언을 사용하여 각 모듈을 자체 <code>d.ts</code> 파일로 정의할 수 있지만, 더 큰 <code>d.ts</code> 파일로 작성하는 것이 편리하다.</p> <p><code>node.d.ts (simplified excerpt)</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">&quot;url&quot;</span> <span class="token punctuation">{</span>
  <span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Url</span> <span class="token punctuation">{</span>
    protocol<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    hostname<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    pathname<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">parse</span><span class="token punctuation">(</span>
    urlStr<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    parseQueryString<span class="token operator">?</span><span class="token punctuation">,</span>
    slashesDenoteHost<span class="token operator">?</span>
  <span class="token punctuation">)</span><span class="token operator">:</span> Url<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">&quot;path&quot;</span> <span class="token punctuation">{</span>
  <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">normalize</span><span class="token punctuation">(</span>p<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">join</span><span class="token punctuation">(</span><span class="token operator">...</span>paths<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">var</span> sep<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><code>/// &lt;reference&gt; node.d.ts</code>를 사용하고 <code>import url = require(&quot;url&quot;)</code>을 사용하여 모듈을 로드할 수 있다.</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">/// &lt;reference path=&quot;node.d.ts&quot;/&gt;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> <span class="token constant">URL</span> <span class="token keyword">from</span> <span class="token string">&quot;url&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> myUrl <span class="token operator">=</span> <span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">&quot;http://www.typescriptlang.org&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="shorthand-ambient-modules"><a href="#shorthand-ambient-modules" class="header-anchor">#</a> Shorthand ambient modules</h4> <p>새 모듈을 사용하기 전에 선언을 작성하는데 시간을 허비하지 않으려면 shorthand 선언을 사용할 수 있다.</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">&quot;hot-new-module&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>shorthand 모듈을 불러오면 <code>any</code> 타입이된다.</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> x<span class="token punctuation">,</span> <span class="token punctuation">{</span> y <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;hot-new-module&quot;</span><span class="token punctuation">;</span>
<span class="token function">x</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="wildcard-module-declarations"><a href="#wildcard-module-declarations" class="header-anchor">#</a> Wildcard module declarations</h4> <p>SystemJS 및 AMD와 같은 일부 모듈로더는 JavaScript가 아닌 콘텐츠를 가져올 수 있다.
이때, 특수 로딩의 의미를 나타내기 위해 접두/접미사를 사용한다.</p> <p>이러한 경우를 다루기 위해 와일드카드 모듈 선언을 사용할 수 있다.</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">&quot;*!text&quot;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> content<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> content<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// Some do it the other way around.</span>
<span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">&quot;json!*&quot;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> value<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> value<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>이제 <code>*!text</code> 또는 <code>json!*</code>과 일치하는 항목을 가져올 수 있다.</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> fileContent <span class="token keyword">from</span> <span class="token string">&quot;./xyz.txt!text&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> data <span class="token keyword">from</span> <span class="token string">&quot;json!http://example.com/data.json&quot;</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> fileContent<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="umd-modules"><a href="#umd-modules" class="header-anchor">#</a> UMD modules</h4> <p>일부 라이브러리는 많은 모듈 로더 또는 모듈 로딩 없이 사용하도록 설계되었다.(전역변수)
이를 UMD 모듈이라고 하며, 이러한 라이브러리는 가져오기 또는 전역 변수를 통해 액세스 할 수 있다.</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> isPrime <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;math-lib&quot;</span><span class="token punctuation">;</span>
<span class="token function">isPrime</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mathLib<span class="token punctuation">.</span><span class="token function">isPrime</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ERROR: can't use the global definition from inside a module</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="guidance-for-structuring-modules"><a href="#guidance-for-structuring-modules" class="header-anchor">#</a> Guidance for structuring modules</h3> <h4 id="최대한-최상위-수준으로-내보내기"><a href="#최대한-최상위-수준으로-내보내기" class="header-anchor">#</a> 최대한 최상위 수준으로 내보내기</h4> <p>모듈을 사용하는 곳에서 가능한 마찰이 적어야 한다.
너무 많은 중첩 수준을 추가하는 것은 성가시므로 대상을 구조화 하는 방법에 신중해야 한다.</p> <p>모듈에서 네임스페이스를 내보내는 것은 중첩 레이어를 많이 만드는 것이다.
네임스페이스는 모듈이 사용될 때 추가적인 간접 참조를 추가하므로 일반적으로 귀찮고 불필요하다.</p> <p>내보내기를 한 정적 메소드에도 비슷한 문제가 있다.
클래스가 중첩 레이어를 추가하므로, 단순히 helper 함수를 내보내는 것을 고려해야 한다.</p> <h4 id="하나의-클래스나-함수만-내보내는-경우-export-default를-사용"><a href="#하나의-클래스나-함수만-내보내는-경우-export-default를-사용" class="header-anchor">#</a> 하나의 클래스나 함수만 내보내는 경우 <code>export default</code>를 사용</h4> <p><code>MyClass.ts</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">SomeType</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>MyFunc.ts</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">getThing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">&quot;thing&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>Consumer.ts</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> t <span class="token keyword">from</span> <span class="token string">&quot;./MyClass&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> f <span class="token keyword">from</span> <span class="token string">&quot;./MyFunc&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">t</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>기본 내보내기를 사용하면 모듈을 사용하는 곳에서는 원하는 대로 유형을 지정할 수 있으며 개체의 이름을 위한 추가 문자열이 절약된다.</p> <h4 id="여러-개체를-내보내는-경우-최상위-수준에-모두-배치하여야-함"><a href="#여러-개체를-내보내는-경우-최상위-수준에-모두-배치하여야-함" class="header-anchor">#</a> 여러 개체를 내보내는 경우 최상위 수준에 모두 배치하여야 함</h4> <p><code>MyThings.ts</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">SomeType</span> <span class="token punctuation">{</span>
  <span class="token comment">/* ... */</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">someFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">/* ... */</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>반대로 불러올 때는 명시적으로 이름을 나열한다</p> <p><code>Consumer.ts</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> SomeType<span class="token punctuation">,</span> someFunc <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./MyThings&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SomeType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token function">someFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="많은-수의-항목을-가져오는-경우-네임스페이스-가져오기-패턴을-사용"><a href="#많은-수의-항목을-가져오는-경우-네임스페이스-가져오기-패턴을-사용" class="header-anchor">#</a> 많은 수의 항목을 가져오는 경우 네임스페이스 가져오기 패턴을 사용</h4> <p><code>MyLargeModule.ts</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Tree</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Flower</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>Consumer.ts</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> myLargeModule <span class="token keyword">from</span> <span class="token string">&quot;./MyLargeModule.ts&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">myLargeModule</span><span class="token punctuation">.</span><span class="token function">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="모듈에서-네임스페이스를-사용하지-않음"><a href="#모듈에서-네임스페이스를-사용하지-않음" class="header-anchor">#</a> 모듈에서 네임스페이스를 사용하지 않음</h4> <p>모듈 기반의 구성으로 변경하는 경우 내보내기에 네임스페이스로 레이어를 추가하는 경향이 있다.
모듈은 자체 범위를 가지며 내보낸 선언만 모듈 외부에서 볼 수 있다.</p> <p>네임스페이스는 논리적으로 관련된 개체와 유형을 그룹화 할 때 편리하다.</p> <p>네임스페이스는 전역 범위에서 이름이 충돌하지 않도록 하는 것이 중요하다.
이름이 같지만 네임스페이스가 다른 경우는 가능하다.
하지만, 이는 모듈의 문제가 아니다. 모듈 내에서 동일한 이름을 가진 두개의 객체를 가져서는 안된다.</p> <h2 id="namespaces"><a href="#namespaces" class="header-anchor">#</a> Namespaces</h2> <h3 id="네임스페이스-소개"><a href="#네임스페이스-소개" class="header-anchor">#</a> 네임스페이스 소개</h3> <p>내부모듈은 네임스페이스로 명명된다(TypeScript 1.5이후)
내부모듈을 선언할 때 <code>module</code> 키워드가 사용된 곳이면 어디나 <code>namespace</code> 키워드를 사용할 수 있지만,
<code>module</code> 키워드 대신 사용해야 비슷한 이름으로 overloading 함으로써 사용자를 혼란스럽게 하는 상황을 방지할 수 있다.</p> <h3 id="namespacing"><a href="#namespacing" class="header-anchor">#</a> Namespacing</h3> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">namespace</span> Validation <span class="token punctuation">{</span>
  <span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">StringValidator</span> <span class="token punctuation">{</span>
    <span class="token function">isAcceptable</span><span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> lettersRegexp <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[A-Za-z]+$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> numberRegexp <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[0-9]+$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>

  <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">LettersOnlyValidator</span> <span class="token keyword">implements</span> <span class="token class-name">StringValidator</span> <span class="token punctuation">{</span>
    <span class="token function">isAcceptable</span><span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> lettersRegexp<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ZipCodeValidator</span> <span class="token keyword">implements</span> <span class="token class-name">StringValidator</span> <span class="token punctuation">{</span>
    <span class="token function">isAcceptable</span><span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> s<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">5</span> <span class="token operator">&amp;&amp;</span> numberRegexp<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Some samples to try</span>
<span class="token keyword">let</span> strings <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;98052&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;101&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// Validators to use</span>
<span class="token keyword">let</span> validators<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>s<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> Validation<span class="token punctuation">.</span>StringValidator <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
validators<span class="token punctuation">[</span><span class="token string">&quot;ZIP code&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Validation</span><span class="token punctuation">.</span><span class="token function">ZipCodeValidator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
validators<span class="token punctuation">[</span><span class="token string">&quot;Letters only&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Validation</span><span class="token punctuation">.</span><span class="token function">LettersOnlyValidator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Show whether each string passed each validator</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> s <span class="token keyword">of</span> strings<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> name <span class="token keyword">in</span> validators<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>s<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot; - </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>
        validators<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">isAcceptable</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;matches&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;does not match&quot;</span>
      <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h3 id="splitting-across-files-multi-file-namespaces"><a href="#splitting-across-files-multi-file-namespaces" class="header-anchor">#</a> Splitting Across Files (Multi-file namespaces)</h3> <p>애플리케이션이 커짐에 따라 코드를 여러 파일로 분할하여 유지보수성을 높이려고 한다.</p> <p><code>Validation</code> 네임스페이스를 여러 파일로 분리하여도 모든 파일이 한 곳에서 정의된 것처럼 사용할 수 있다.</p> <p>파일 간에는 종속성이 있으므로 컴파일러에서 파일 사이 관계를 알 수 있도록 참조 태그를 추가한다.</p> <p><code>Validation.ts</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">namespace</span> Validation <span class="token punctuation">{</span>
  <span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">StringValidator</span> <span class="token punctuation">{</span>
    <span class="token function">isAcceptable</span><span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>LettersOnlyValidator.ts</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">/// &lt;reference path=&quot;Validation.ts&quot; /&gt;</span>
<span class="token keyword">namespace</span> Validation <span class="token punctuation">{</span>
  <span class="token keyword">const</span> lettersRegexp <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[A-Za-z]+$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">LettersOnlyValidator</span> <span class="token keyword">implements</span> <span class="token class-name">StringValidator</span> <span class="token punctuation">{</span>
    <span class="token function">isAcceptable</span><span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> lettersRegexp<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><code>ZipCodeValidator.ts</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">/// &lt;reference path=&quot;Validation.ts&quot; /&gt;</span>
<span class="token keyword">namespace</span> Validation <span class="token punctuation">{</span>
  <span class="token keyword">const</span> numberRegexp <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[0-9]+$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ZipCodeValidator</span> <span class="token keyword">implements</span> <span class="token class-name">StringValidator</span> <span class="token punctuation">{</span>
    <span class="token function">isAcceptable</span><span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> s<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">5</span> <span class="token operator">&amp;&amp;</span> numberRegexp<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="aliases"><a href="#aliases" class="header-anchor">#</a> Aliases</h3> <p>네임스페이스를 간단하게 사용하기 위한 다른 방법은 <code>import q = x.y.z</code>를 사용하여 짧은 이름을 만드는 것이다.</p> <p>이는 모듈을 불러오는 <code>import x = require('name')</code> 구문과 혼동되기 쉽다.</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">namespace</span> Shapes <span class="token punctuation">{</span>
  <span class="token keyword">export</span> <span class="token keyword">namespace</span> Polygons <span class="token punctuation">{</span>
    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Triangle</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Square</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">import</span> polygons <span class="token operator">=</span> Shapes<span class="token punctuation">.</span>Polygons<span class="token punctuation">;</span>
<span class="token keyword">let</span> sq <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">polygons</span><span class="token punctuation">.</span><span class="token function">Square</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Same as 'new Shapes.Polygons.Square()'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="네임스페이스와-javascript-libraries"><a href="#네임스페이스와-javascript-libraries" class="header-anchor">#</a> 네임스페이스와 JavaScript Libraries</h3> <p>TypeScript로 작성되지 않은 라이브러리는 외부 노출을 위한 API 선언이 필요하다.</p> <p>대부분의 JavaScript 라이브러리는 몇 개의 최상위 수준 객체만 노출하므로 네임스페이스를 사용하는 것이 좋은 방식이다.</p> <h2 id="namespaces-and-modules"><a href="#namespaces-and-modules" class="header-anchor">#</a> Namespaces and Modules</h2> <h3 id="using-namespaces"><a href="#using-namespaces" class="header-anchor">#</a> Using Namespaces</h3> <p>네임스페이스는 글로벌 네임스페이스에서 JavaScript 객체로 명명된다.</p> <h3 id="using-modules"><a href="#using-modules" class="header-anchor">#</a> Using Modules</h3> <p>네임스페이스와 마찬가지로 모듈에는 코드와 선언이 모두 포함될 수 있다. 가장 큰 차이점은 모듈이 의존선을 선언한다는 것이다.</p> <p>또한 모듈은 모듈로더(CommonJs Require.js ...)에 종속된다.
이는 대규모 응용프로그램의 경우 장기적인 유지 관리의 이점이 있다.</p> <h3 id="네임스페이스와-모듈의-함정"><a href="#네임스페이스와-모듈의-함정" class="header-anchor">#</a> 네임스페이스와 모듈의 함정</h3> <h4 id="reference-ing-a-module"><a href="#reference-ing-a-module" class="header-anchor">#</a> <code>/// &lt;reference&gt;</code>-ing a module</h4> <p>일반적인 실수는 <code>import</code>문을 사용하는 대신 <code>/// &lt;reference ... /&gt;</code> 구문을 사용하여 모듈 파일을 참조하려고 하는 것이다.</p> <p>컴파일러는 적절한 경로로 <code>.ts</code>, <code>.tsx</code>, <code>.d.ts</code>를 찾으려고 한다.
특정 파일을 찾을 수 없으면 컴파일러는 주변 모듈 선언을 찾는다. 이는 <code>.d.ts</code> 파일에서 선언할 필요가 있다.</p> <p><code>myModules.d.ts</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">// In a .d.ts file or .ts file that is not a module:</span>
<span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">&quot;SomeModule&quot;</span> <span class="token punctuation">{</span>
  <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>myOtherModule.ts</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">/// &lt;reference path=&quot;myModules.d.ts&quot; /&gt;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> m <span class="token keyword">from</span> <span class="token string">&quot;SomeModule&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>여기에서 참조 태그는 주변 모듈에 대한 선언을 포함하는 선언 파일(<code>.d.ts</code>)을 찾을 수 있게 해준다.</p> <h4 id="needless-namespacing"><a href="#needless-namespacing" class="header-anchor">#</a> Needless Namespacing</h4> <p>프로그램을 네임스페이스에서 모듈로 변환하는 경우 다음과 같이 할 수 있다.</p> <p><code>shapes.ts</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">namespace</span> Shapes <span class="token punctuation">{</span>
  <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Triangle</span> <span class="token punctuation">{</span>
    <span class="token comment">/* ... */</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Square</span> <span class="token punctuation">{</span>
    <span class="token comment">/* ... */</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>최상위 모듈 <code>Shapes</code>는 특별한 이유없이 <code>Triangle</code>과 <code>Square</code>를 감싸고 있다. 이는 사용시 혼란과 짜증을 불러온다.</p> <p><code>shapeConsumer.ts</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> shapes <span class="token keyword">from</span> <span class="token string">&quot;./shapes&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">shapes</span><span class="token punctuation">.</span>Shapes<span class="token punctuation">.</span><span class="token function">Triangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// shapes.Shapes?</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>TypeScript 모듈의 핵심기능은 두 개의 다른 모듈이 동일한 범위에 이름을 제공하지 않는다는 것이다.
모듈 소비자는 할당 할 이름을 결정하기 때문에 네임스페이스에서 내보낸 심볼을 사전에 감쌀필요가 없다.</p> <p>네임스페이스의 일반적인 개념은 논리적 그룹핑 구조를 제공하고 이름 충돌을 방지하는 것이다.
모듈 파일 자체는 이미 논리적 그룹이며 최상위 이름은 가져오는 코드에서 정의되므로 내보낸 객체에 추가적인 모듈 레이어를 사용할 필요가 없다.</p> <p>따라서 위의 코드를 다시 써보면</p> <p><code>shapes.ts</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Triangle</span> <span class="token punctuation">{</span>
  <span class="token comment">/* ... */</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Square</span> <span class="token punctuation">{</span>
  <span class="token comment">/* ... */</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>shapeConsumer.ts</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> shapes <span class="token keyword">from</span> <span class="token string">&quot;./shapes&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">shapes</span><span class="token punctuation">.</span><span class="token function">Triangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="module-resolution"><a href="#module-resolution" class="header-anchor">#</a> Module Resolution</h2> <p>Module Resolution은 import가 무엇을 의미하는지 파악하기 위해 컴파일러가 사용하는 프로세스이다.</p> <p><code>import { a } from 'moduleA'</code> 구문에서 <code>a</code>가 무엇을 나타내는지 알아내기 위해서 <code>moduleA</code>를 검사할 필요가 있다.</p> <p>이때 <code>moduleA</code>는 <code>.ts</code> / <code>.tsx</code> 파일 중 하나 또는 <code>.d.ts</code>파일에 정의될 수 있다.</p> <p>컴파일러는 불러온 모듈을 지정한 파일을 찾은 뒤 Classic 또는 Node라는 위치를 찾기위한 두 가지 전략 중 하나를 따른다.
두 방법이 작동하지 않고 모듈 이름이 상대적이지 않은 경우 컴파일러는 ambient module 선언을 찾으려고 시도한다.</p> <p>마지막으로 컴파일러가 모듈을 찾을 수 없으면 오류가 출력된다.</p> <blockquote><p><code>error TS2307: Cannot find module 'moduleA'.</code></p></blockquote> <h3 id="relative-vs-non-relative-module-imports"><a href="#relative-vs-non-relative-module-imports" class="header-anchor">#</a> Relative vs. Non-relative module imports</h3> <p>모듈 가져오기는 모듈 참조가 상대적인지에 따라 다르게 처리된다.</p> <p>상대경로 가져오기는 <code>/</code>, <code>./</code> 또는 <code>../</code>으로 시작한다.</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> Entry <span class="token keyword">from</span> <span class="token string">&quot;./components/Entry&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> DefaultHeaders <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../constants/http&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;/mod&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>가져오기가 상대경로가 아닌 경우는 다음과 같다</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> $ <span class="token keyword">from</span> <span class="token string">&quot;jquery&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@angular/core&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>상대경로 가져오기는 런타임시 상대위치를 유지하도록 보장되는 모듈에 대해서 사용해야 한다.</p> <p>상대경로가 아닌 가져오기는 <code>baseUrl</code>을 기준으로 하거나 경로 매핑을 통해 사용할 수 있다.</p> <h3 id="module-resolution-strategies"><a href="#module-resolution-strategies" class="header-anchor">#</a> Module Resolution Strategies</h3> <p>모듈 분석 전략에는 Node와 Classic 두 가지가 있다.
값이 지정되지 않는다면 기본적으로 <code>--module AMD | System | ES2015</code>에 대해서는 <strong>Classic</strong>이며, 이외의 경우 <strong>Node</strong>이다.</p> <h4 id="classic"><a href="#classic" class="header-anchor">#</a> Classic</h4> <p>타입스크립트의 기본 모듈 분석전략이었다. 최근에는 이전 버전과의 호환성을 위해 제공된다.</p> <p>상대경로 가져오기는 가져오는 파일과 관련하여 처리된다.</p> <p>소스파일 <code>/root/src/folder/A.ts</code>에서 <code>import { b } from &quot;./moduleB&quot;</code>를 사용한다면 다음 순서의 조회가 발생한다.</p> <ol><li><code>/root/src/folder/moduleB.ts</code></li> <li><code>/root/src/folder/moduleB.d.ts</code></li></ol> <p>그러나 <strong>상대경로가 아닌 가져오기</strong>의 경우 컴파일러는 가져오기를 사용한 소스의 위치부터 시작하여 일치하는 정의 파일을 찾기위해 디렉토리 트리를 찾는다.</p> <p>소스파일 <code>/root/src/folder/A.ts</code>에서 <code>import { b } from &quot;./moduleB&quot;</code>를 사용한다면 다음 순서의 조회가 발생한다.</p> <ol><li><code>/root/src/folder/moduleB.ts</code></li> <li><code>/root/src/folder/moduleB.d.ts</code></li> <li><code>/root/src/moduleB.ts</code></li> <li><code>/root/src/moduleB.d.ts</code></li> <li><code>/root/moduleB.ts</code></li> <li><code>/root/moduleB.d.ts</code></li> <li><code>/moduleB.ts</code></li> <li><code>/moduleB.d.ts</code></li></ol> <h4 id="node"><a href="#node" class="header-anchor">#</a> Node</h4> <p>Node 분석 전략은 Node.js 모듈 분석 메커니즘을 모방한다. <a href="https://nodejs.org/api/modules.html#modules_all_together" target="_blank" rel="noopener noreferrer">https://nodejs.org/api/modules.html#modules_all_together<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>일반적으로 Node.js의 가져오기는 <code>require</code>라는 함수를 호출하여 수행된다.
Node.js의 동작은 <code>require</code>에 상대 경로 또는 비 상대경로가 있는지에 따라 달라진다.</p> <p>상대경로 가져오기는 소스파일 <code>/root/src/folder/A.ts</code>에서 <code>var x = require(&quot;./moduleB&quot;)</code>를 사용한다면 다음 순서의 조회가 발생한다.</p> <ol><li><code>/root/src/moduleB.js</code> 파일이 존재하면 요청한다.</li> <li><code>/root/src/moduleB</code> 폴더가 <code>&quot;main&quot;</code> 모듈을 가리키는 <code>package.json</code> 파일을 포함하고 있는지 확인한다. 만약 <code>{ &quot;main&quot;: &quot;lib/mainModule.js&quot; }</code> 코드를 포함하는 <code>package.json</code> 파일을 찾는다면 Node.js는 <code>/root/src/moduleB/lib/mainModule.js</code> 파일을 참조한다.</li> <li><code>/root/src/moduleB</code> 폴더가 <code>index.js</code> 파일을 포함하는지 확인한다. 이 파일은 암시적으로 폴더의 main 모듈로 간주된다.</li></ol> <p>그러나 <strong>상대경로가 아닌 가져오기</strong>의 경우 다르게 수행된다.</p> <p>node는 <code>node_modules</code>라는 특수 디렉토리에서 모듈을 검색한다.
<code>node_modules</code> 디렉토리는 현재 파일과 동일 레벨이거나 디렉토리 체인에서 상위 레벨일 수 있다.</p> <p>node는 불려오려고 시도한 모듈을 찾을 때 까지 각 <code>node_modules</code>를 조사하기위해 디렉토리 체인을 따라간다.</p> <p>소스파일 <code>/root/src/moduleA.js</code>가 비상대경로를 사용하고 <code>import var x = require ( &quot;moduleB&quot;)</code>가 있는 경우 다음 순서의 조회가 발생한다.</p> <ol><li><p><code>/root/src/node_modules/moduleB.js</code></p></li> <li><p><code>/root/src/node_modules/moduleB/package.json</code> (if it specifies a &quot;main&quot; property)</p></li> <li><p><code>/root/src/node_modules/moduleB/index.js</code></p></li> <li><p><code>/root/node_modules/moduleB.js</code></p></li> <li><p><code>/root/node_modules/moduleB/package.json</code> (if it specifies a &quot;main&quot; property)</p></li> <li><p><code>/root/node_modules/moduleB/index.js</code></p></li> <li><p><code>/node_modules/moduleB.js</code></p></li> <li><p><code>/node_modules/moduleB/package.json</code> (if it specifies a &quot;main&quot; property)</p></li> <li><p><code>/node_modules/moduleB/index.js</code></p></li></ol> <p>4단계와 7단계에서 디렉토리를 건너뛰었다.</p> <p><code>node_modules</code>에서 모듈을 로딩하는 과정은 다음을 참조: <a href="https://nodejs.org/api/modules.html#modules_loading_from_node_modules_folders" target="_blank" rel="noopener noreferrer">https://nodejs.org/api/modules.html#modules_loading_from_node_modules_folders<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="how-typescript-resolves-modules"><a href="#how-typescript-resolves-modules" class="header-anchor">#</a> How TypeScript resolves modules</h4> <p>TypeScript는 컴파일 타임에 모듈 정의 파일을 찾기 위해 Node.js 런타임 해석 전략을 모방한다.
이를 위해 TypeScript 원본 파일 확장명(.ts .tsk .d.ts)을 Node.js 전략위에 둔다.
또한 <code>package.json</code>의 <code>types</code>필드는 <code>main</code>을 미러링할 목적으로 사용한다.</p> <p><code>/root/src/moduleA.ts</code> 파일에서 <code>&quot;./moduleB&quot;에서 import {b}</code>를 사용하면 <code>&quot;./moduleB&quot;</code>를 찾기 위해 다음 위치를 시도한다.</p> <ol><li><code>/root/src/moduleB.ts</code></li> <li><code>/root/src/moduleB.tsx</code></li> <li><code>/root/src/moduleB.d.ts</code></li> <li><code>/root/src/moduleB/package.json</code> (if it specifies a &quot;types&quot; property)</li> <li><code>/root/src/moduleB/index.ts</code></li> <li><code>/root/src/moduleB/index.tsx</code></li> <li><code>/root/src/moduleB/index.d.ts</code></li></ol> <p>비슷하게 상대경로 불러오기는 Node.js의 분석전략에 따라 파일을 찾은 다음 디렉토리를 찾는다.
따라서 <code>/root/src/moduleA.ts</code> 파일에서 <code>&quot;./moduleB&quot;에서 import {b}</code>를 사용하면 다음 과정으로 처리된다.</p> <ol><li><p><code>/root/src/node_modules/moduleB.ts</code></p></li> <li><p><code>/root/src/node_modules/moduleB.tsx</code></p></li> <li><p><code>/root/src/node_modules/moduleB.d.ts</code></p></li> <li><p><code>/root/src/node_modules/moduleB/package.json</code> (if it specifies a &quot;types&quot; property)</p></li> <li><p><code>/root/src/node_modules/@types/moduleB.d.ts</code></p></li> <li><p><code>/root/src/node_modules/moduleB/index.ts</code></p></li> <li><p><code>/root/src/node_modules/moduleB/index.tsx</code></p></li> <li><p><code>/root/src/node_modules/moduleB/index.d.ts</code></p></li> <li><p><code>/root/node_modules/moduleB.ts</code></p></li> <li><p><code>/root/node_modules/moduleB.tsx</code></p></li> <li><p><code>/root/node_modules/moduleB.d.ts</code></p></li> <li><p><code>/root/node_modules/moduleB/package.json</code> (if it specifies a &quot;types&quot; property)</p></li> <li><p><code>/root/node_modules/@types/moduleB.d.ts</code></p></li> <li><p><code>/root/node_modules/moduleB/index.ts</code></p></li> <li><p><code>/root/node_modules/moduleB/index.tsx</code></p></li> <li><p><code>/root/node_modules/moduleB/index.d.ts</code></p></li> <li><p><code>/node_modules/moduleB.ts</code></p></li> <li><p><code>/node_modules/moduleB.tsx</code></p></li> <li><p><code>/node_modules/moduleB.d.ts</code></p></li> <li><p><code>/node_modules/moduleB/package.json</code> (if it specifies a &quot;types&quot; property)</p></li> <li><p><code>/node_modules/@types/moduleB.d.ts</code></p></li> <li><p><code>/node_modules/moduleB/index.ts</code></p></li> <li><p><code>/node_modules/moduleB/index.tsx</code></p></li> <li><p><code>/node_modules/moduleB/index.d.ts</code></p></li></ol> <p>9단계와 17단계에서 디렉토리 건너뛰기가 발생한다.</p> <h3 id="additional-module-resolution-flags"><a href="#additional-module-resolution-flags" class="header-anchor">#</a> Additional module resolution flags</h3> <p>프로젝트 소스 레이아웃이 출력의 레이아웃과 일치하지 않는 경우가 있다.
<code>.ts</code> 파일을 <code>.js</code> 파일로 컴파일하고 여러 종속성을 단일 출력위치로 복사하는 작업이 포함된다.</p> <p>즉, 최종 결과는 런타임에 모듈 정의파일과 다른 이름을 가지거나 최종 출력의 모듈 경로가 소스파일 경로와 일치하지 않을 수 있다.</p> <p>TypeScript 컴파일러에는 최종 출력을 생성하기 위해 예상되는 변환을 컴파일러에 알리는 추가 플래그가 있다.
컴파일러는 이러한 변환을 직접 수행하지 않고, 모듈 가져오기를 definition 파일로 해석하는 프로세스를 안내한다.</p> <h4 id="base-url"><a href="#base-url" class="header-anchor">#</a> Base URL</h4> <p><code>baseUrl</code>을 사용하는 것은 모듈이 런타임에 단일 디렉토리에 배포되는 AMD 모듈 로더를 사용하는 응용 프로그램에서 일반적으로 사용된다.</p> <p><code>baseUrl</code>을 설정하면 모듈을 찾을 위치를 컴파일러에게 알린다.
비상대경로의 모든 모듈을 가져올 때 <code>baseUrl</code>에 상대적이라고 가정한다.</p> <p><code>baseUrl</code> 값은 다음 중 하나로 결정된다</p> <ul><li><code>baseUrl</code> 커맨드 라인 인자 값 (주어진 경로가 상대경로라면 현재 디렉토리를 기반으로 계산됨)</li> <li><code>tsconfig.json</code>의 <code>baseUrl</code> 속성 값 (주어진 경로가 상대경로인 경우 <code>tsconfig.json</code> 위치를 기반으로 계산됨)</li></ul> <p>상대경로 모듈 가져오기는 <code>baseUrl</code> 설정에 영향을 받지 않으며 항상 불러오는 파일에 대해 상대적으로 처리된다.</p> <h4 id="path-mapping"><a href="#path-mapping" class="header-anchor">#</a> Path mapping</h4> <p>때때로 모듈은 <code>baseUrl</code> 아래에 직접 위치하지 않는다.
예를 들어 <code>jquery</code>에 대한 가져오기는 런타임에 <code>node_modules/jquery/dist/jquery.slim.min.js</code>로 변환된다.</p> <p>로더는 mapping 구성을 사용하여 런타임시 모듈 이름을 파일에 매핑한다.</p> <p>TypeScript컴파일러는 <code>tsconfig.json</code> 파일의 <code>path</code> 속성을 사용하여 매핑을 선언한다.</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;baseUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span> <span class="token comment">// This must be specified if &quot;paths&quot; is.</span>
    <span class="token property">&quot;paths&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;jquery&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;node_modules/jquery/dist/jquery&quot;</span><span class="token punctuation">]</span> <span class="token comment">// This mapping is relative to &quot;baseUrl&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>경로는 <code>baseUrl</code>을 기준으로 처리된다. <code>baseUrl</code>을 <code>&quot;.&quot;</code> 이외의 다른 값으로 설정하는 경우 그에 따라 매핑을 변경해야 한다.</p> <p>예를 들어 <code>&quot;baseUrl&quot;: &quot;./src&quot;</code>인 경우 <code>jquery</code>는 <code>&quot;../node_modules/jquery/dist/jquery&quot;</code>에 매핑되어야 한다.</p> <p><code>path</code>를 사용하면 다중 fallback 경로를 포함하여 보다 정교한 매핑을 할 수 있다.</p> <p>한 위치에서 일부 모듈만 사용하고 나머지 모듈은 다른 위치에 있는 프로젝트 구성을 생각해보자.</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>projectRoot
├── folder1
│   ├── file1.ts (imports 'folder1/file2' and 'folder2/file3')
│   └── file2.ts
├── generated
│   ├── folder1
│   └── folder2
│       └── file3.ts
└── tsconfig.json
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>이에 대응하는 <code>tsconfig.json</code>은 다음과 같다</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;baseUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;paths&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;generated/*&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li><code>&quot;*&quot;</code>: 변경없이 같은이름 적용, 따라서 <code>&lt;moduleName&gt; =&gt; &lt;baseUrl&gt;/&lt;moduleName&gt;</code>으로 매핑됨</li> <li><code>&quot;generated/*&quot;</code>: 모듈이름에 &quot;generated&quot;라는 prefix를 추가하여 매핑, 따라서 <code>&lt;moduleName&gt; =&gt; &lt;baseUrl&gt;/generated/&lt;moduleName&gt;</code></li></ul> <p>이 논리에 따라 컴파일러는 두 가지 가져오기를 다음과 같이 처리한다</p> <p><code>import 'folder1/file2'</code></p> <ul><li><code>&quot;*&quot;</code> 패턴 순서에서 와일드카드는 전체 모듈이름을 캡처한다</li> <li>목록에서 첫 대체가 수행된다: <code>'*' -&gt; folder1/file2</code></li> <li>대체의 결과물은 비상대 경로이므로 baseUrl과 결합한다: <code>projectRoot/folder1/file2.ts</code></li> <li>파일이 존재하고 끝난다</li></ul> <p><code>import 'folder2/file3'</code></p> <ul><li><code>&quot;*&quot;</code> 패턴 순서에서 와일드카드는 전체 모듈이름을 캡처한다</li> <li>목록에서 첫 대체가 수행된다: <code>'*' -&gt; folder2/file3</code></li> <li>대체의 결과물은 비상대 경로이므로 baseUrl과 결합한다: <code>projectRoot/folder2/file3.ts</code></li> <li>파일이 존재하지 않으면 두 번째의 대체를 수행한다</li> <li>두 번째 대체가 수행된다: <code>'generated/*' -&gt; generated/folder2/file3</code></li> <li>대체의 결과물은 비상대 경로이므로 baseUrl과 결합한다: <code>projectRoot/generated/folder2/file3.ts</code></li> <li>파일이 존재하고 끝난다</li></ul> <h4 id="virtual-directories-with-rootdirs"><a href="#virtual-directories-with-rootdirs" class="header-anchor">#</a> Virtual Directories with rootDirs</h4> <p>때로는 컴파일 타임에 여러 디렉토리의 프로젝트 소스가 모두 결합되어 하나의 출력 디렉토리가 생성된다.
이것은 일련의 소스 디렉토리가 가상(virtual) 디렉토리를 만드는 것으로 볼 수 있다.</p> <p><code>rootDirs</code>를 사용하면 가상 디레곹리를 구성하는 루트를 컴파일러에 알릴 수 있다.
따라서 컴파일러는 가상 디렉토리 내의 상대경로 모듈 가져오기를 하나의 티렉토리에 병합된 것처럼 해석할 수 있다.</p> <p>다음과 같은 프로젝트 구조로 예를 들어 보면</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>src
└── views
    └── view1.ts (imports './template1')
    └── view2.ts

generated
└── templates
        └── views
            └── template1.ts (imports './view2')
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>빌드 단계에서 <code>/src/views</code>와 <code>/generated/templates/views</code> 파일 출력을 동일한 디렉토리에 하려고 한다.
런타임에 뷰는 템플릿이 동일 경로에 존재하는 것을 기대하므로 <code>&quot;./template&quot;</code>와 같이 상대경로를 사용하여 뷰를 불러온다.</p> <p>이러한 관계를 컴파일러에게 알려주기 위해서 <code>rootDirs</code>를 사용한다.
<code>rootDirs</code>는 내용이 런타임에 병합될 것으로 예상되는 루트 목록을 지정한다.</p> <p>이 경우 <code>tsconfig.json</code> 파일은 다음과 같다</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;rootDirs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;src/views&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;generated/templates/views&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>컴파일러는 <code>rootDirs</code> 중 하나의 하위폴더에서 상대경로 모듈 가져오기를 볼 때마다 <code>rootDirs</code>의 각 항목에서 가져오기를 찾는다.</p> <p><code>rootDirs</code>의 유연성은 논리적으로 병합된 실제 소스 디렉토리의 목록을 지정하는데에 국한되지 않는다.
디렉토리 목록에는 존재 여부와 관계없이 임의 숫자의 디렉토리 이름이 포함될 수 있다.
이를 통해 컴파일러는 조건부 포함 및 프로젝트 특정 로더 플러그인과 같은 정교한 번들 및 런타임 기능을 type safe 방식으로 캡쳐할 수 있다.</p> <p><code>./#{locale}/messages</code>의 상대 모듈 경로의 일부로 <code>#{locale}</code>와 같은 특수 경로 토큰을 삽입하여
빌드 도구가 locale별 번들을 자동으로 생성하는 국제화 시나리오를 생각해 보자.
이 경우 지원되는 locale을 열거하고 추상화된 경로를 <code>./ko/messages</code>, <code>./de/messages</code>등으로 매핑한다.</p> <p><code>rootDirs</code>를 활용하면 컴파일러에게 이 매핑을 알릴 수 있으므로 디렉토리가 존재하지 않더라도 <code>./#{locale}/messages</code>를 안전하게 해결할 수 있다.</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;rootDirs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;src/ko&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;src/de&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;src/#{locale}&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>이제 컴파일러는 <code>import messages from './#{locale}/messages</code>를 <code>import messages from './ko/messages</code>로 해석하여
디자인 시점에서 지원하기로 협의되지 않은 것을 지원할 수 있도록 한다.</p> <h4 id="tracing-module-resolution"><a href="#tracing-module-resolution" class="header-anchor">#</a> Tracing module resolution</h4> <p>앞에서 논의된 것 처럼 컴파일러는 모듈을 확인할 때 현재 디렉토리 외부의 파일을 확인할 수 있다.
이는 모듈이 처리되지 않거나 잘못된 정의로 해석될 때 분석을 어렵게한다.
<code>--traceResolution</code> 옵션을 사용하여 컴파일러 모듈 분석 추적을 활성화 하면 모듈 확인 프로세스 중 발생한 문제를 파악할 수 있다.</p> <h4 id="using-noresolve"><a href="#using-noresolve" class="header-anchor">#</a> Using <code>--noResolve</code></h4> <p>일반적으로 컴파일러는 컴파일 프로세스를 시작하기 전에 모든 모듈 가져오기를 처리하려고 시도한다.
파일에서 가져오기를 성공할 때마다 컴파일러에서 나중에 처리할 파일 집합에 파일이 추가된다.</p> <p><code>--noResolve</code> 컴파일러 옵션은 컴파일러가 명령줄에서 전달되지 않은 파일을 컴파일에 추가하지 않도록 처리한다.</p> <p><code>app.ts</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> <span class="token constant">A</span> <span class="token keyword">from</span> <span class="token string">&quot;moduleA&quot;</span><span class="token punctuation">;</span> <span class="token comment">// OK, 'moduleA' passed on the command-line</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> <span class="token constant">B</span> <span class="token keyword">from</span> <span class="token string">&quot;moduleB&quot;</span><span class="token punctuation">;</span> <span class="token comment">// Error TS2307: Cannot find module 'moduleB'.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code>tsc app.ts moduleA.ts --noResolve
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>--noResolve</code> 옵션을 사용하여 <code>app.ts</code>를 컴파일 하려고 하면</p> <ul><li>명령줄에서 전달된 <code>moduleA</code>는 올바르게 찾는다</li> <li>명령줄에서 전달되지 않은 <code>modulesB</code>는 찾지 못한다</li></ul> <h4 id="common-questions"><a href="#common-questions" class="header-anchor">#</a> Common Questions</h4> <blockquote><p>Exclude 목록에 있는 모듈이 컴파일러에 의해 선택되는 경우는?</p></blockquote> <p><code>tsconfig.json</code> 설정은 디렉토리를 <strong>프로젝트</strong>로 만든다.
*&quot;excludes&quot;*나 <em>&quot;files&quot;</em> 항목을 지정하지 않으면 <code>tsconfig.json</code> 경로의 모든 파일과 모든 하위 디렉토리가 컴파일에 포함된다.</p> <p>일부 파일을 제외시키려면 *&quot;excludes&quot;*를, 컴파일러에게 특정한 파일만을 지정하여 처리하도록 하려면 *&quot;files&quot;*를 사용한다.</p> <p>컴파일러에서 파일을 가져오기 대상으로 식별한 경우 이전단계에서 제외되었는지 관계없이 컴파일에 포함된다.</p> <h2 id="declaration-merging-선언-병합"><a href="#declaration-merging-선언-병합" class="header-anchor">#</a> Declaration Merging (선언 병합)</h2> <h3 id="introduction-of-declaration-merging"><a href="#introduction-of-declaration-merging" class="header-anchor">#</a> Introduction of Declaration Merging</h3> <p>TypeScript의 고유한 개념 중 일부는 타입 수준에서 JavaScript 객체의 형태를 설명하는 것이다. 그 중 하나가 &quot;선언 병합&quot;이다.</p> <p>&quot;선언 병합&quot;은 컴파일러가 동일한 이름의 두 선언을 하나의 정의로 병합하는 것이다.
병합한 정의에는 원래의 두 선언이 가진 기능이 있으며 둘 이상의 선언을 병합할 수도 있다.</p> <h3 id="basic-concepts"><a href="#basic-concepts" class="header-anchor">#</a> Basic Concepts</h3> <p>타입스크립트에서는 선언은 <code>namespace</code>, <code>type</code>, <code>value</code>의 세 그룹중 적어도 하나를 만든다.</p> <p>네임스페이스를 만드는 선언은 네임스페이스를 만들고 네임스페이스에는 dotted notation을 사용하여 접근할 수 있는 이름이 포함된다.
타입을 만드는 선언은 선언된 형태로 표시되고 주어진 이름에 연결된 타입을 생성한다.
마지막으로 값을 만드는 선언은 JavaScript 출력에서 보이는 값들을 만들어낸다.</p> <table><thead><tr><th>Declaration Type</th> <th>Namespace</th> <th>Type</th> <th>Value</th></tr></thead> <tbody><tr><td>Namespace</td> <td>X</td> <td></td> <td>X</td></tr> <tr><td>Class</td> <td></td> <td>X</td> <td>X</td></tr> <tr><td>Enum</td> <td></td> <td>X</td> <td>X</td></tr> <tr><td>Interface</td> <td></td> <td>X</td> <td></td></tr> <tr><td>Type Alias</td> <td></td> <td>X</td> <td></td></tr> <tr><td>Function</td> <td></td> <td></td> <td>X</td></tr> <tr><td>Variable</td> <td></td> <td></td> <td>X</td></tr></tbody></table> <h3 id="merging-interfaces"><a href="#merging-interfaces" class="header-anchor">#</a> Merging Interfaces</h3> <p>가장 단순하고 가장 일반적으로 사용되는 형태의 선언 병합은 인터페이스 병합이다.
가장 기초적인 수준에서 병합은, 기계적으로 두 선언의 멤버를 동일한 이름의 단일 인터페이스로 합친다.</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Box</span> <span class="token punctuation">{</span>
  height<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  width<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Box</span> <span class="token punctuation">{</span>
  scale<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> box<span class="token operator">:</span> Box <span class="token operator">=</span> <span class="token punctuation">{</span> height<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> width<span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span> scale<span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>함수가 아닌 인터페이스의 멤버는 고유해야 한다. 만약 고유하지 않으면 동일한 타입이어야 한다.</p> <p>함수 멤버의 경우 같은 이름의 멤버는 다른 함수의 overload를 설명하는 것으로 처리된다.
인터페이스 <code>A</code>가 추가적인 인터페이스 <code>A</code>와 병합하는 경우 두 번째 인터페이스의 우선순위가 더 높다.</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Cloner</span> <span class="token punctuation">{</span>
  <span class="token function">clone</span><span class="token punctuation">(</span>animal<span class="token operator">:</span> Animal<span class="token punctuation">)</span><span class="token operator">:</span> Animal<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Cloner</span> <span class="token punctuation">{</span>
  <span class="token function">clone</span><span class="token punctuation">(</span>animal<span class="token operator">:</span> Sheep<span class="token punctuation">)</span><span class="token operator">:</span> Sheep<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Cloner</span> <span class="token punctuation">{</span>
  <span class="token function">clone</span><span class="token punctuation">(</span>animal<span class="token operator">:</span> Dog<span class="token punctuation">)</span><span class="token operator">:</span> Dog<span class="token punctuation">;</span>
  <span class="token function">clone</span><span class="token punctuation">(</span>animal<span class="token operator">:</span> Cat<span class="token punctuation">)</span><span class="token operator">:</span> Cat<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>세 인터페이스는 병합하여 다음의 단일 선언을 생성한다</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Cloner</span> <span class="token punctuation">{</span>
    <span class="token function">clone</span><span class="token punctuation">(</span>animal<span class="token operator">:</span> Dog<span class="token punctuation">)</span><span class="token operator">:</span> Dog<span class="token punctuation">;</span>
    <span class="token function">clone</span><span class="token punctuation">(</span>animal<span class="token operator">:</span> Cat<span class="token punctuation">)</span><span class="token operator">:</span> Cat<span class="token punctuation">;</span>
    <span class="token function">clone</span><span class="token punctuation">(</span>animal<span class="token operator">:</span> Sheep<span class="token punctuation">)</span><span class="token operator">:</span> Sheep<span class="token punctuation">;</span>
    <span class="token function">clone</span><span class="token punctuation">(</span>animal<span class="token operator">:</span> Animal<span class="token punctuation">)</span><span class="token operator">:</span> Animal<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>각 그룹의 요소는 동일한 순서를 유지하지만 overload 집합의 순서가 우선한다.</p> <p>이 규칙의 하나의 예외는 specialized signatures이다.
시그니처가 단일 문자열 리터럴 타입(문자열 리터럴 union이 아닌)의 파라미터가 있는 경우 병합된 overload 목록의 맨 위로 버블링한다.</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Document</span> <span class="token punctuation">{</span>
  <span class="token function">createElement</span><span class="token punctuation">(</span>tagName<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> Element<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Document</span> <span class="token punctuation">{</span>
  <span class="token function">createElement</span><span class="token punctuation">(</span>tagName<span class="token operator">:</span> <span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token operator">:</span> HTMLDivElement<span class="token punctuation">;</span>
  <span class="token function">createElement</span><span class="token punctuation">(</span>tagName<span class="token operator">:</span> <span class="token string">&quot;span&quot;</span><span class="token punctuation">)</span><span class="token operator">:</span> HTMLSpanElement<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Document</span> <span class="token punctuation">{</span>
  <span class="token function">createElement</span><span class="token punctuation">(</span>tagName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> HTMLElement<span class="token punctuation">;</span>
  <span class="token function">createElement</span><span class="token punctuation">(</span>tagName<span class="token operator">:</span> <span class="token string">&quot;canvas&quot;</span><span class="token punctuation">)</span><span class="token operator">:</span> HTMLCanvasElement<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>병합 결과 <code>Document</code> 선언은 다음과 같다</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Document</span> <span class="token punctuation">{</span>
  <span class="token function">createElement</span><span class="token punctuation">(</span>tagName<span class="token operator">:</span> <span class="token string">&quot;canvas&quot;</span><span class="token punctuation">)</span><span class="token operator">:</span> HTMLCanvasElement<span class="token punctuation">;</span>
  <span class="token function">createElement</span><span class="token punctuation">(</span>tagName<span class="token operator">:</span> <span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token operator">:</span> HTMLDivElement<span class="token punctuation">;</span>
  <span class="token function">createElement</span><span class="token punctuation">(</span>tagName<span class="token operator">:</span> <span class="token string">&quot;span&quot;</span><span class="token punctuation">)</span><span class="token operator">:</span> HTMLSpanElement<span class="token punctuation">;</span>
  <span class="token function">createElement</span><span class="token punctuation">(</span>tagName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> HTMLElement<span class="token punctuation">;</span>
  <span class="token function">createElement</span><span class="token punctuation">(</span>tagName<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> Element<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="merging-namespaces"><a href="#merging-namespaces" class="header-anchor">#</a> Merging Namespaces</h3> <p>인터페이스와 비슷하게 같은 이름의 네임스페이스도 멤버를 병합한다.
네임스페이스는 네임스페이스와 값을 모두 생성하기 때문에 병합 방식을 이해해야 한다.</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">namespace</span> Animals <span class="token punctuation">{</span>
  <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Zebra</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">namespace</span> Animals <span class="token punctuation">{</span>
  <span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Legged</span> <span class="token punctuation">{</span> numberOfLegs<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>위의 코드는 다음 코드와 동일하다</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">namespace</span> Animals <span class="token punctuation">{</span>
  <span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Legged</span> <span class="token punctuation">{</span> numberOfLegs<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

  <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Zebra</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
  <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>내보내기를 선언하지 않은 멤버는 원본(병합 이전) 네임스페이스에서만 볼 수 있다.</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">namespace</span> Animal <span class="token punctuation">{</span>
  <span class="token keyword">let</span> haveMuscles <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

  <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">animalsHaveMuscles</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> haveMuscles<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">namespace</span> Animal <span class="token punctuation">{</span>
  <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">doAnimalsHaveMuscles</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> haveMuscles<span class="token punctuation">;</span>  <span class="token comment">// Error, because haveMuscles is not accessible here</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="merging-namespaces-with-classes-functions-and-enums"><a href="#merging-namespaces-with-classes-functions-and-enums" class="header-anchor">#</a> Merging Namespaces with Classes, Functions, and Enums</h3> <p>네임스페이스는 다른 유형의 선언과 유연하게 병합한다.
이렇게 하려면 네임스페이스 선언이 병합할 선언을 따라야 한다.</p> <h4 id="merging-namespaces-with-classes"><a href="#merging-namespaces-with-classes" class="header-anchor">#</a> Merging Namespaces with Classes</h4> <p>다음은 내부 클래스를 표현한 것이다</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">class</span> <span class="token class-name">Album</span> <span class="token punctuation">{</span>
  label<span class="token operator">:</span> Album<span class="token punctuation">.</span>AlbumLabel<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">namespace</span> Album <span class="token punctuation">{</span>
  <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AlbumLabel</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>병합한 멤버의 가시성 규칙은 병합 네임스페이스 섹션에서 확인했던것 처럼 내보내기를 해야 보인다.</p> <p>내부 클래스 패턴이외에도 함수를 작성한 다음 함수에 특성을 추가해 함수를 확장하는 JS 패턴을 병합 선언을 통해 사용할 수 있다.</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">buildLabel</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> buildLabel<span class="token punctuation">.</span>prefix <span class="token operator">+</span> name <span class="token operator">+</span> buildLabel<span class="token punctuation">.</span>suffix<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">namespace</span> buildLabel <span class="token punctuation">{</span>
  <span class="token keyword">export</span> <span class="token keyword">let</span> suffix <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">let</span> prefix <span class="token operator">=</span> <span class="token string">&quot;Hello, &quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">buildLabel</span><span class="token punctuation">(</span><span class="token string">&quot;Sam Smith&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>비슷하게 네임스페이스는 enum과 static member를 확장하는데 사용할 수도 있다</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">enum</span> Color <span class="token punctuation">{</span>
  red <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
  green <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span>
  blue <span class="token operator">=</span> <span class="token number">4</span>
<span class="token punctuation">}</span>

<span class="token keyword">namespace</span> Color <span class="token punctuation">{</span>
  <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">mixColor</span><span class="token punctuation">(</span>colorName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>colorName <span class="token operator">==</span> <span class="token string">&quot;yellow&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> Color<span class="token punctuation">.</span>red <span class="token operator">+</span> Color<span class="token punctuation">.</span>green<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>colorName <span class="token operator">==</span> <span class="token string">&quot;white&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> Color<span class="token punctuation">.</span>red <span class="token operator">+</span> Color<span class="token punctuation">.</span>green <span class="token operator">+</span> Color<span class="token punctuation">.</span>blue<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>colorName <span class="token operator">==</span> <span class="token string">&quot;magenta&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> Color<span class="token punctuation">.</span>red <span class="token operator">+</span> Color<span class="token punctuation">.</span>blue<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>colorName <span class="token operator">==</span> <span class="token string">&quot;cyan&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> Color<span class="token punctuation">.</span>green <span class="token operator">+</span> Color<span class="token punctuation">.</span>blue<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="disallowed-merges"><a href="#disallowed-merges" class="header-anchor">#</a> Disallowed Merges</h3> <p>TypeScript에서 모든 병합이 허용되는 것은 아니다.
현재 클래스는 다른 클래스 또는 변수와 병합할 수 없다.</p> <blockquote><p>클래스 병합을 모방하는 방식은 Mixins 섹션을 참고</p></blockquote> <h3 id="module-augmentation"><a href="#module-augmentation" class="header-anchor">#</a> Module Augmentation</h3> <p>JavaScript 모듈은 병합을 지원하지 않지만 기존 객체를 가져와서 업데이트 할 수 있다</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">// observable.ts</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Observable<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token comment">// ... implementation left as an exercise for the reader ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// map.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Observable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./observable&quot;</span><span class="token punctuation">;</span>
Observable<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">map</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>f<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ... another exercise for the reader</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>위의 코드는 잘 작동하지만 컴파일러는 <code>Observable.prototype.map</code>에 대해 잘 알지 못한다.
module augmentation을 사용하여 컴파일러에게 알릴 수 있다.</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">// observable.ts</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Observable<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token comment">// ... implementation left as an exercise for the reader ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// map.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Observable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./observable&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">&quot;./observable&quot;</span> <span class="token punctuation">{</span>
  <span class="token keyword">interface</span> <span class="token class-name">Observable<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token generic-function"><span class="token function">map</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token function-variable function">f</span><span class="token operator">:</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">U</span><span class="token punctuation">)</span><span class="token operator">:</span> Observable<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
Observable<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">map</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>f<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ... another exercise for the reader</span>
<span class="token punctuation">}</span>

<span class="token comment">// consumer.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Observable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./observable&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;./map&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> o<span class="token operator">:</span> Observable<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
o<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>모듈 이름은 가져오기/내보내기의 module specifier와 동일한 방법으로 처리된다.
그리고 나서, 원래의 파일과 동일한 파일에서 선언된 것 처럼 module augmentation 선언이 합쳐진다.</p> <p>그러나 두 가지 제한사항이 있다</p> <ul><li>최상위 수준의 선언에 확장 할 수 없다. 단지 기존선언에 대한 수정이다.</li> <li>default exports 역시 확장할 수 없으며 명명된 내보내기에만 사용 가능하다.</li></ul> <h4 id="global-augmentation"><a href="#global-augmentation" class="header-anchor">#</a> Global augmentation</h4> <p>전역범위에 모듈 내부의 선언을 추가할 수 있다</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">// observable.ts</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Observable<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token comment">// ... still no implementation ...</span>
<span class="token punctuation">}</span>

<span class="token keyword">declare</span> global <span class="token punctuation">{</span>
  <span class="token keyword">interface</span> <span class="token class-name"><span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token function">toObservable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Observable<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token builtin">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">toObservable</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>전역 augmentation은 module augmentation과 동일한 작동 및 제약사항이 있다</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/wiki/assets/js/app.014474a0.js" defer></script><script src="/wiki/assets/js/2.9f07087a.js" defer></script><script src="/wiki/assets/js/251.e299ed69.js" defer></script>
  </body>
</html>
