(window.webpackJsonp=window.webpackJsonp||[]).push([[126],{486:function(t,e,s){"use strict";s.r(e);var a=s(27),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"logrotate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#logrotate"}},[t._v("#")]),t._v(" LogRotate")]),t._v(" "),s("p",[t._v("일반적인 리눅스 배포판에서 LogRotate는 기본적으로 실행되고 있음")]),t._v(" "),s("h2",{attrs:{id:"파일"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#파일"}},[t._v("#")]),t._v(" 파일")]),t._v(" "),s("ul",[s("li",[t._v("daemon: "),s("code",[t._v("/usr/sbin/logrotate")])]),t._v(" "),s("li",[t._v("설정: "),s("code",[t._v("/etc/logrotate.conf")])]),t._v(" "),s("li",[t._v("설정: "),s("code",[t._v("/etc/logrotate.d/")])]),t._v(" "),s("li",[t._v("Logrotate 로그 : "),s("code",[t._v("/etc/cron.daily/logrotate")])])]),t._v(" "),s("h2",{attrs:{id:"설정"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#설정"}},[t._v("#")]),t._v(" 설정")]),t._v(" "),s("p",[s("code",[t._v("/etc/logrotate.conf")]),t._v(" 설정 파일에서 "),s("code",[t._v("include /etc/logrotate.d")]),t._v(" 경로의 설정도 참조하여 적용한다.")]),t._v(" "),s("p",[t._v("따라서 세부설정(어플리케이션 별)은 "),s("code",[t._v("/etc/logrotate.d/")]),t._v("를 활용하는 것이 좋다.")]),t._v(" "),s("div",{staticClass:"language-conf line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("/home/idpravus/myapp/*.log {\n    su idpravus idpravus\n    daily\n    rotate 90\n    compress\n    dateext\n    missingok\n    notifempty\n    size +4096k\n    create 644 root root\n    sharedscripts\n    postrotate\n      /etc/init.d/syslog reload\n    endscript\n}\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br")])]),s("ul",[s("li",[s("code",[t._v("su <user> <group>")]),t._v(": rotate 대상을 제어하기 위해서 사용자를 변경함(default: root가 명령을 실행함)")]),t._v(" "),s("li",[t._v("rotation 주기: daily, weekly, monthly, yearly")]),t._v(" "),s("li",[t._v("rotate: 유지할 파일의 개수")]),t._v(" "),s("li",[t._v("compress || nocompress: 파일 압축 여부")]),t._v(" "),s("li",[t._v("dateext: 파일 이름에 날짜 추가")]),t._v(" "),s("li",[t._v("missingok: 파일이 없어도 오류를 발생시키지 않음")]),t._v(" "),s("li",[t._v("notifempty: 파일이 비어있으면 rotate 하지 않음")]),t._v(" "),s("li",[t._v("size: size 보다 로그파일이 클 경우 로테이션을 수행 (k -> kilobyte, m -> megabyte)")]),t._v(" "),s("li",[t._v("postrotate: rotate 후 실행할 스크립트\n"),s("ul",[s("li",[t._v("rotate를 실행하면 원본파일을 백업 파일로 복사한 후에 삭제한다")]),t._v(" "),s("li",[t._v("따라서 로그를 생성하던 애플리케이션은 파일에 대한 참조를 잃어버려서 로그를 쌓을 수 없게 된다")]),t._v(" "),s("li",[t._v("이를 처리하기 위해 추가로 명령을 실행한다")])])]),t._v(" "),s("li",[t._v("copytruncate\n"),s("ul",[s("li",[t._v("애플리케이션이 로그파일을 새로 만들기 위한 시그널 처리 코드를 가지고 있지 않은 경우")]),t._v(" "),s("li",[t._v("copytruncate를 이용하면 원본파일을 지우지 않고 파일 크기를 0으로 만든다(truncate)")]),t._v(" "),s("li",[t._v("파일을 복사하고 truncate 하는 순간 로그를 잃어버릴 수도 있다")])])])])])}),[],!1,null,null,null);e.default=n.exports}}]);