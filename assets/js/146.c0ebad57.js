(window.webpackJsonp=window.webpackJsonp||[]).push([[146],{347:function(s,a,e){"use strict";e.r(a);var t=e(0),r=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"ssh"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ssh"}},[s._v("#")]),s._v(" SSH")]),s._v(" "),e("p",[s._v("시큐어 셸(Secure Shell, SSH)은 네트워크 상의 다른 컴퓨터에 로그인하거나 원격 시스템에서 명령을 실행하고 다른 시스템으로 파일을 복사할 수 있도록 해 주는 응용 프로그램 또는 그 프로토콜을 가리킨다.")]),s._v(" "),e("p",[s._v("기존의 rsh, rlogin, 텔넷 등을 대체하기 위해 설계되었으며, 강력한 인증 방법 및 안전하지 못한 네트워크에서 안전하게 통신을 할 수 있는 기능을 제공한다.")]),s._v(" "),e("p",[s._v("기본적으로는 22번 포트를 사용한다.")]),s._v(" "),e("h2",{attrs:{id:"설치"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#설치"}},[s._v("#")]),s._v(" 설치")]),s._v(" "),e("p",[e("code",[s._v("sudo apt install openssh-server")])]),s._v(" "),e("h2",{attrs:{id:"기본명령어"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#기본명령어"}},[s._v("#")]),s._v(" 기본명령어")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("-b bind_address")]),s._v(": ip가 두개이상인 경우")]),s._v(" "),e("li",[e("code",[s._v("-E log_file")])]),s._v(" "),e("li",[e("code",[s._v("-e escape_char")])]),s._v(" "),e("li",[e("code",[s._v("-F configfile")])]),s._v(" "),e("li",[e("code",[s._v("-i identity_file")])]),s._v(" "),e("li",[e("code",[s._v("-J [user@]host[:port]")]),s._v(" (ProxyJump)")]),s._v(" "),e("li",[e("code",[s._v("-p port")])])]),s._v(" "),e("p",[e("code",[s._v("ssh [user@]hostname [command]")])]),s._v(" "),e("h2",{attrs:{id:"인증"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#인증"}},[s._v("#")]),s._v(" 인증")]),s._v(" "),e("h3",{attrs:{id:"ssh-비대칭-키-발급"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ssh-비대칭-키-발급"}},[s._v("#")]),s._v(" SSH 비대칭 키 발급")]),s._v(" "),e("p",[s._v("RSA 방식의 비대칭키를 생성함. 비밀번호 대신 public key, private key를 활용해 인증한다.")]),s._v(" "),e("p",[e("code",[s._v('ssh-keygen -t rsa -C "comment"')])]),s._v(" "),e("blockquote",[e("p",[s._v("permissions are too open 오류: 비공개 키의 권한을 변경한다: "),e("code",[s._v("chmod 400 ~/.ssh/id_rsa")])])]),s._v(" "),e("h3",{attrs:{id:"비대칭-키를-사용해-인증-비밀번호-입력-대신"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#비대칭-키를-사용해-인증-비밀번호-입력-대신"}},[s._v("#")]),s._v(" 비대칭 키를 사용해 인증 (비밀번호 입력 대신)")]),s._v(" "),e("p",[s._v("공개키를 서버의 "),e("code",[s._v("authorized_keys")]),s._v("에 등록: "),e("code",[s._v("ssh-copy-id user@host")])]),s._v(" "),e("p",[s._v("서버에서 권한 설정")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("700")]),s._v(" ~/.ssh\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("600")]),s._v(" ~/.ssh/id_rsa\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("644")]),s._v(" ~/.ssh/id_rsa.pub\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("644")]),s._v(" ~/.ssh/authorized_keys\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("644")]),s._v(" ~/.ssh/known_hosts\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h3",{attrs:{id:"ssh-연결을-비대칭-키만-사용-비밀번호-사용x"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ssh-연결을-비대칭-키만-사용-비밀번호-사용x"}},[s._v("#")]),s._v(" ssh 연결을 비대칭 키만 사용(비밀번호 사용X)")]),s._v(" "),e("p",[e("code",[s._v("/etc/ssh/sshd_config")]),s._v(" 설정파일 수정")]),s._v(" "),e("div",{staticClass:"language-text line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# Change to no to disable tunnelled clear text passwords\nPasswordAuthentication no\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"공개키-복사"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#공개키-복사"}},[s._v("#")]),s._v(" 공개키 복사")]),s._v(" "),e("p",[e("code",[s._v("ssh-copy-id <user>@<host>")])]),s._v(" "),e("h2",{attrs:{id:"ssh-config-설정"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ssh-config-설정"}},[s._v("#")]),s._v(" SSH config 설정")]),s._v(" "),e("p",[e("code",[s._v(".ssh/config")])]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("Host "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("host-alias"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    HostName "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("remote-host"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    User "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("username"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    IdentityFile "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("~/.ssh/my-identity.pem"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("Identity 파일을 지정하지 않으면 "),e("code",[s._v(".ssh/id_rsa")]),s._v("가 기본으로 사용된다")]),s._v(" "),e("h2",{attrs:{id:"secure-copy-scp"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#secure-copy-scp"}},[s._v("#")]),s._v(" Secure Copy (SCP)")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("옵션"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("원본 경로 및 파일명"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("대상 경로 및 파일명"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ul",[e("li",[e("p",[s._v("옵션")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("-P")]),s._v(" : 포트번호")]),s._v(" "),e("li",[e("code",[s._v("-p")]),s._v(" : 원본 파일 시간의 수정시간, 사용시간, 권한을 유지한다 (preserve)")]),s._v(" "),e("li",[e("code",[s._v("-r")]),s._v(" : 하위 폴더/파일 모두 복사한다 (recursive)")])])]),s._v(" "),e("li",[e("p",[s._v("사용 예")]),s._v(" "),e("ul",[e("li",[s._v("보내기 : "),e("code",[s._v("scp -rp 파일명 user@host:~/다운로드/파일명")])]),s._v(" "),e("li",[s._v("받기 : "),e("code",[s._v("scp -rp user@host:~/다운로드/파일명 로컬경로/파일명")])])])])]),s._v(" "),e("h2",{attrs:{id:"ssh-port-forwarding-tunneling"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ssh-port-forwarding-tunneling"}},[s._v("#")]),s._v(" SSH Port Forwarding (Tunneling)")]),s._v(" "),e("ul",[e("li",[s._v("C(압축하여 접속)")]),s._v(" "),e("li",[s._v("N(shell 명령어 실행 금지)")]),s._v(" "),e("li",[s._v("f(백그라운드로 실행)")])]),s._v(" "),e("h3",{attrs:{id:"local-forwarding"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#local-forwarding"}},[s._v("#")]),s._v(" Local Forwarding")]),s._v(" "),e("p",[e("code",[s._v("ssh -L <PORT1>:remote:<PORT2> [user@]server")])]),s._v(" "),e("p",[s._v("다음의 연결이 성립한다: "),e("code",[s._v("localhost:<PORT1> -> server == tunnel -> remote:<PORT2>")])]),s._v(" "),e("p",[s._v("remote는 server에서 도달할 수 있는 "),e("code",[s._v("<hostname | ip address>")]),s._v("를 사용하여야 한다")]),s._v(" "),e("p",[s._v("예시: "),e("code",[s._v("ssh -i ~/.ssh/id_rsa -N -L 8080:localhost:3000 pravusid@pravusid.kr")])]),s._v(" "),e("h3",{attrs:{id:"remote-forwarding"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#remote-forwarding"}},[s._v("#")]),s._v(" Remote Forwarding")]),s._v(" "),e("p",[e("code",[s._v("ssh -R [허용IP:]8080:localhost:80 public.example.com")])]),s._v(" "),e("p",[s._v("다음의 연결이 성립한다: "),e("code",[s._v("public.example.com:8080 -> localhost:80")])]),s._v(" "),e("p",[s._v("사용을 위해서 ssh 옵션을 변경해야 한다")]),s._v(" "),e("p",[e("code",[s._v("/etc/ssh/sshd_config")])]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("GatewayPorts "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])])}),[],!1,null,null,null);a.default=r.exports}}]);