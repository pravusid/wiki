(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{393:function(s,a,t){"use strict";t.r(a);var e=t(28),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"elastic-stack"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#elastic-stack"}},[s._v("#")]),s._v(" Elastic Stack")]),s._v(" "),t("h2",{attrs:{id:"elasticsearch"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#elasticsearch"}},[s._v("#")]),s._v(" ElasticSearch")]),s._v(" "),t("h3",{attrs:{id:"es-설치"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#es-설치"}},[s._v("#")]),s._v(" ES 설치")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": max "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" descriptors "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" elasticsearch process is too low, increase to at least "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("65536")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": max number of threads "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" user "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("elasticsearch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" is too low, increase to at least "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": max virtual memory areas vm.max_map_count "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("65530")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" is too low, increase to at least "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("262144")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": system call filters failed to "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" check the logs and fix your configuration or disable system call filters at your own risk\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("ul",[t("li",[t("p",[s._v("A-1: "),t("code",[s._v("/etc/security/limits.conf")])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("username hard nofile "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("65536")]),s._v("\nusername soft nofile "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("65536")]),s._v("\nusername hard nproc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("65536")]),s._v("\nusername "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sort")]),s._v(" nproc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("65536")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("A-2: ulimit")]),s._v(" "),t("ul",[t("li",[s._v("ulimit -n 65536")]),s._v(" "),t("li",[s._v("ulimit -u 65536")])])]),s._v(" "),t("li",[t("p",[s._v("B-1: "),t("code",[s._v("/etc/sysctl.conf")])]),s._v(" "),t("ul",[t("li",[s._v("vm.max_map_count=262144")])])]),s._v(" "),t("li",[t("p",[s._v("B-2: "),t("code",[s._v("sysctl -w vm.max_map_count=262144")])])])]),s._v(" "),t("p",[s._v("A로 해결되지 않으면: "),t("code",[s._v("/etc/security/limits.d/90-nproc.conf")])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# changed original soft nproc 1024 to 4096")]),s._v("\n* soft nproc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("여전히 해결되지 않으면: "),t("code",[s._v("/etc/init.d/elasticsearch")])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("start")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("ulimit")]),s._v(" -u "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ...")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"es-설정"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#es-설정"}},[s._v("#")]),s._v(" ES 설정")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("code",[s._v("config/elasticsearch.yml")])]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("path.data")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /var/lib/elasticsearch\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("path.logs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /var/log/elasticsearch\n\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("network.host")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_local_"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0.0.0.0"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("http.compression")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("xpack.security.enabled")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("false")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("xpack.monitoring.enabled")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("xpack.monitoring.collection.enabled")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("searchguard.enterprise_modules_enabled")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("false")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[t("code",[s._v("jvm.options")])]),s._v(" "),t("div",{staticClass:"language-conf line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# Xms represents the initial size of total heap space - 최소 시스템 메모리 1/2\n# Xmx represents the maximum size of total heap space - 최대 32gb\n\n-Xms4g\n-Xmx4g\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"apis-kibana-dev-tools-console"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#apis-kibana-dev-tools-console"}},[s._v("#")]),s._v(" APIs (kibana Dev Tools Console)")]),s._v(" "),t("h4",{attrs:{id:"index"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#index"}},[s._v("#")]),s._v(" Index")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/indices.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.elastic.co/guide/en/elasticsearch/reference/current/indices.html"),t("OutboundLink")],1)]),s._v(" "),t("h4",{attrs:{id:"template"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#template"}},[s._v("#")]),s._v(" Template")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-templates.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-templates.html"),t("OutboundLink")],1)]),s._v(" "),t("ul",[t("li",[s._v("전체조회: GET /_template")]),s._v(" "),t("li",[s._v("삭제: DELETE /_template/{name}")])]),s._v(" "),t("h4",{attrs:{id:"search"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#search"}},[s._v("#")]),s._v(" Search")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/search.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.elastic.co/guide/en/elasticsearch/reference/current/search.html"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"data-types"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#data-types"}},[s._v("#")]),s._v(" Data Types")]),s._v(" "),t("h4",{attrs:{id:"core-datatypes"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#core-datatypes"}},[s._v("#")]),s._v(" Core datatypes")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("String")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/text.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("text"),t("OutboundLink")],1),s._v(": 전체 텍스트 값을 인덱싱")]),s._v(" "),t("li",[t("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/keyword.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("keyword"),t("OutboundLink")],1),s._v(": 구조화된 값(정확한 값으로만 검색)")])])]),s._v(" "),t("li",[t("p",[t("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/number.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Numeric"),t("OutboundLink")],1)]),s._v(" "),t("ul",[t("li",[s._v("long: 64bit 정수")]),s._v(" "),t("li",[s._v("integer: 32bit 정수")]),s._v(" "),t("li",[s._v("short: 16bit 정수")]),s._v(" "),t("li",[s._v("byte: 8bit 정수")]),s._v(" "),t("li",[s._v("double: double precision 64bit IEEE 754 실수")]),s._v(" "),t("li",[s._v("float: single precision 32bit IEEE 754 실수")]),s._v(" "),t("li",[s._v("half_float: half precision 16bit IEEE 754 실수")]),s._v(" "),t("li",[s._v("scaled_float: 고정 "),t("code",[s._v("double")]),s._v(" scale factor에 의해 확장된 유한 실수")])])]),s._v(" "),t("li",[t("p",[t("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/date.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Date"),t("OutboundLink")],1)]),s._v(" "),t("ul",[t("li",[s._v("날짜 포맷으로 작성된 string")]),s._v(" "),t("li",[s._v("epoch miliseconds을 표현하는 long")]),s._v(" "),t("li",[s._v("epoch seconds를 표현하는 integer")])])]),s._v(" "),t("li",[t("p",[t("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/boolean.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Boolean"),t("OutboundLink")],1),s._v(": 참, 거짓")])])]),s._v(" "),t("h4",{attrs:{id:"complex-datatypes"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#complex-datatypes"}},[s._v("#")]),s._v(" Complex datatypes")]),s._v(" "),t("ul",[t("li",[t("p",[t("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/array.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Array"),t("OutboundLink")],1)]),s._v(" "),t("ul",[t("li",[s._v("모든 필드는 0개 이상의 값이 포함 될 수 있으나 모든 값은 동일한 타입이어야 한다")]),s._v(" "),t("li",[s._v("객체의 배열은 예상 대로 작동하지 않으므로 중첩 데이터 유형을 사용해야 한다")])])]),s._v(" "),t("li",[t("p",[t("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/object.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Object"),t("OutboundLink")],1)]),s._v(" "),t("ul",[t("li",[s._v("JSON 문서는 계층적이고 내부에 객체를 포함할 수 있다")])])]),s._v(" "),t("li",[t("p",[t("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/nested.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Nested"),t("OutboundLink")],1)]),s._v(" "),t("ul",[t("li",[s._v("중첩 타입은 객체 타입의 특수한 형태로 객체 배열을 서로 독립적으로 쿼리할 수 있도록 인덱싱 한다")])])])]),s._v(" "),t("h4",{attrs:{id:"geo-datatypes"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#geo-datatypes"}},[s._v("#")]),s._v(" Geo datatypes")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/geo-point.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.elastic.co/guide/en/elasticsearch/reference/current/geo-point.html"),t("OutboundLink")],1)]),s._v(" "),t("ul",[t("li",[s._v("Geo-point expressed as an object, with lat and lon keys")]),s._v(" "),t("li",[s._v('Geo-point expressed as a string with the format: "lat,lon"')]),s._v(" "),t("li",[s._v("Geo-point expressed as a geohash")]),s._v(" "),t("li",[s._v("Geo-point expressed as an array with the format: [lon, lat]")]),s._v(" "),t("li",[s._v("A geo-bounding box query which finds all geo-points that fall inside the box")])]),s._v(" "),t("h2",{attrs:{id:"kibana"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kibana"}},[s._v("#")]),s._v(" Kibana")]),s._v(" "),t("h3",{attrs:{id:"kibana-설치"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kibana-설치"}},[s._v("#")]),s._v(" Kibana 설치")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.elastic.co/guide/en/kibana/current/install.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.elastic.co/guide/en/kibana/current/install.html"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"kibana-설정"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kibana-설정"}},[s._v("#")]),s._v(" Kibana 설정")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.elastic.co/guide/en/kibana/current/settings.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.elastic.co/guide/en/kibana/current/settings.html"),t("OutboundLink")],1)]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("elasticsearch.hosts")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://localhost:9200"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("elasticsearch.username")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"kibana"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("elasticsearch.password")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"password"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("xpack.spaces.enabled")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("false")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("xpack.security.enabled")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("false")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("xpack.monitoring.enabled")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("elasticsearch.ssl.verificationMode")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" none\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("elasticsearch.ssl.certificateAuthorities")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /etc/kibana/root"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("ca.pem\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("h2",{attrs:{id:"search-guard-community"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#search-guard-community"}},[s._v("#")]),s._v(" Search Guard (Community)")]),s._v(" "),t("h3",{attrs:{id:"search-guard-설치"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#search-guard-설치"}},[s._v("#")]),s._v(" Search Guard 설치")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://docs.search-guard.com/latest/search-guard-installation",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://docs.search-guard.com/latest/search-guard-installation"),t("OutboundLink")],1)]),s._v(" "),t("ul",[t("li",[s._v("호환 버전 확인: "),t("a",{attrs:{href:"https://docs.search-guard.com/latest/search-guard-versions",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://docs.search-guard.com/latest/search-guard-versions"),t("OutboundLink")],1)]),s._v(" "),t("li",[s._v("설치: "),t("code",[s._v("bin/elasticsearch-plugin install -b com.floragunn:search-guard-6:<version>")])]),s._v(" "),t("li",[s._v("라이선스 확인: "),t("code",[s._v("https://example.com:9200/_searchguard/license")])]),s._v(" "),t("li",[s._v("라이선스 제한("),t("code",[s._v("elasticsearch.yml")]),s._v("): "),t("code",[s._v("searchguard.enterprise_modules_enabled: false")])])]),s._v(" "),t("h3",{attrs:{id:"tls-설정"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tls-설정"}},[s._v("#")]),s._v(" TLS 설정")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://docs.search-guard.com/latest/offline-tls-tool",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://docs.search-guard.com/latest/offline-tls-tool"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/6.6/certutil.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.elastic.co/guide/en/elasticsearch/reference/6.6/certutil.html"),t("OutboundLink")],1)]),s._v(" "),t("ul",[t("li",[t("p",[s._v("TLS-Tool을 다운로드 받아 압축을 풀면 "),t("code",[s._v("config")]),s._v(" 디렉토리에 "),t("code",[s._v("example.yml")]),s._v("과 "),t("code",[s._v("template.yml")]),s._v(" 파일이 있음")])]),s._v(" "),t("li",[t("p",[s._v("해당 파일을 수정하여 "),t("code",[s._v("tlsconfig.yml")]),s._v(" 파일을 생성함 (node URI)")])]),s._v(" "),t("li",[t("p",[s._v("이후 스크립트 실행: "),t("code",[s._v("<installation directory>/tools/")]),s._v(" 디렉토리에서 "),t("code",[s._v("sgtlstool.sh -c ../config/tlsconfig.yml -ca -crt")])])]),s._v(" "),t("li",[t("p",[s._v("인증서 관련 설정파일이 생성됨: "),t("code",[s._v("<installation directory>/tools/out/<node>_elasticsearch_config_snippet.yml")])]),s._v(" "),t("ul",[t("li",[t("p",[s._v("생성되는 파일들")]),s._v(" "),t("ul",[t("li",[t("p",[t("code",[s._v("root-ca.pem")]),s._v(": Root certificate")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("root-ca.key")]),s._v(": Private key of the Root CA")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("root-ca.readme")]),s._v(": Passwords of the root and intermediate CAs")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("[nodename].pem")]),s._v(": Node(Server) certificate")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("[nodename].key")]),s._v(": Private key of the node(server) certificate")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("[nodename]_http.pem")]),s._v(": REST certificate, only generated if reuseTransportCertificatesForHttp is false")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("[nodename]_http.key")]),s._v(": Private key of the REST certificate, only generated if reuseTransportCertificatesForHttp is false")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("[nodename]_elasticsearch_config_snippet.yml")]),s._v(": Search Guard configuration snippet for this node, add this to elasticsearch.yml")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("[name].pem")]),s._v(": Client certificate")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("[name].key")]),s._v(": Private key of the client certificate")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("client-certificates.readme")]),s._v(": Contains the auto-generated passwords for the certificates")])])])]),s._v(" "),t("li",[t("p",[s._v("생성된 설정파일을 elastic 설정에 적용: "),t("code",[s._v("elasticsearch.yml")])])])])]),s._v(" "),t("li",[t("p",[s._v("sgadmin 실행:")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("./sgadmin.sh -icl -nhnv -cd /usr/share/elasticsearch/plugins/search-guard-6/sgconfig "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  -cacert /etc/elasticsearch/certs/root-ca.pem "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  -cert /etc/elasticsearch/certs/"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("admin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(".pem "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  -key /etc/elasticsearch/certs/"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("admin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(".key -keypass "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("certificatepassword"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])])])]),s._v(" "),t("h3",{attrs:{id:"계정-설정"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#계정-설정"}},[s._v("#")]),s._v(" 계정 설정")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("기본 계정정보: "),t("code",[s._v("/usr/share/elasticsearch/plugins/search-guard-6/sgconfig/sg_internal_users.yml")])])]),s._v(" "),t("li",[t("p",[s._v("비밀번호 해싱: "),t("code",[s._v("plugins/search-guard-6/tools/hash.sh -p mycleartextpassword")])])]),s._v(" "),t("li",[t("p",[s._v("internal user 사용을 위한 "),t("code",[s._v("sg_config.yml")]),s._v(" 설정")]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("authc")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("basic_internal_auth_domain")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("enabled")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("order")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("http_authenticator")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" basic\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("challenge")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("authentication_backend")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" internal\n\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("authz")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("internal_authorization")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("enabled")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("authorization_backend")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" internal\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("설정 업데이트: 스크립트(sgadmin 실행) 재실행")])])]),s._v(" "),t("h3",{attrs:{id:"kibana-설정-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kibana-설정-2"}},[s._v("#")]),s._v(" kibana 설정")]),s._v(" "),t("p",[s._v("플러그인 URL: "),t("a",{attrs:{href:"https://search.maven.org/search?q=g:com.floragunn%20AND%20a:search-guard-kibana-plugin",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://search.maven.org/search?q=g:com.floragunn AND a:search-guard-kibana-plugin"),t("OutboundLink")],1)]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NODE_OPTIONS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"--max-old-space-size=8192"')]),s._v(" bin/kibana-plugin "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" https://url/to/search-guard-kibana-plugin-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(".zip\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("code",[s._v("sg_internal_users.yml")]),s._v(" 설정에서 kibana 에서 사용할 계정에 "),t("code",[s._v("kibanaserver")]),s._v(" role을 부여함\n("),t("code",[s._v("sg_roles_mapping.yml")]),s._v("에 alias 되어있음)")]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("sg_kibana_server")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("readonly")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("backendroles")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" kibanaserver\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[t("code",[s._v("sg_config.yml")]),s._v(" 설정 후 스크립트(sgadmin 실행) 재실행")]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("authc")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kibana_auth_domain")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("enabled")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("order")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("http_authenticator")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" basic\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("challenge")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("false")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("authentication_backend")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" internal\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[t("code",[s._v("/etc/kibana/kibana.yml")]),s._v(" 설정")]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("server.host")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"pravusid.kr"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("elasticsearch.hosts")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://pravusid.kr:9200"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("elasticsearch.username")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"username"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("elasticsearch.password")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"password"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("xpack.spaces.enabled")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("false")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("xpack.security.enabled")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("false")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("elasticsearch.ssl.verificationMode")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" none\n\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("searchguard.allow_client_certificates")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("elasticsearch.ssl.certificateAuthorities")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root-ca.crt"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("elasticsearch.ssl.certificate")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" client.crt\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("elasticsearch.ssl.key")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" client.key\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("elasticsearch.ssl.key.passphrase")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"PASSWORD"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("h3",{attrs:{id:"logstash-설정"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#logstash-설정"}},[s._v("#")]),s._v(" LogStash 설정")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://docs.search-guard.com/latest/elasticsearch-logstash-search-guard",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://docs.search-guard.com/latest/elasticsearch-logstash-search-guard"),t("OutboundLink")],1)]),s._v(" "),t("div",{staticClass:"language-conf line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('input {\n  beats {\n    port => 9600\n    ssl => true\n    ssl_certificate_authorities => ["root-ca.crt"]\n    ssl_certificate => "server.crt"\n    ssl_key => "server.key"\n    ssl_key_passphrase => "PASSWORD"\n  }\n}\n\noutput {\n  elasticsearch {\n    user => logstash\n    password => logstash\n    ssl => true\n    ssl_certificate_verification => false\n    ssl_certificate_authorities => ["root-ca.crt"]\n    ssl_certificate => "client.crt"\n    ssl_key => "client.key"\n    ssl_key_passphrase => "PASSWORD"\n  }\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br")])]),t("h2",{attrs:{id:"x-pack-commercial"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#x-pack-commercial"}},[s._v("#")]),s._v(" X-Pack (Commercial)")]),s._v(" "),t("h3",{attrs:{id:"x-pack-설정"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#x-pack-설정"}},[s._v("#")]),s._v(" X-Pack 설정")]),s._v(" "),t("p",[s._v("ElasticSearch")]),s._v(" "),t("ul",[t("li",[t("p",[t("code",[s._v("bin/elasticsearch-plugin install x-pack")])])]),s._v(" "),t("li",[t("p",[s._v("Confirm that you want to grant X-Pack additional permissions")])]),s._v(" "),t("li",[t("p",[s._v("action.auto_create_index in elasticsearch.yml to allow X-Pack to create the following indices:")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("action.auto_create_index: .security,.monitoring*,.watches,.triggered_watches,.watcher-history*,.ml*")])])])])]),s._v(" "),t("p",[s._v("Kibana")]),s._v(" "),t("ul",[t("li",[t("p",[t("code",[s._v("bin/kibana-plugin install x-pack")])])]),s._v(" "),t("li",[t("p",[t("code",[s._v("kibana.yml")])]),s._v(" "),t("ul",[t("li",[t("code",[s._v('elasticsearch.username: "kibana"')])]),s._v(" "),t("li",[t("code",[s._v('elasticsearch.password: "password"')])])])])]),s._v(" "),t("p",[s._v("LogStash")]),s._v(" "),t("ul",[t("li",[t("p",[t("code",[s._v("bin/logstash-plugin install x-pack")])])]),s._v(" "),t("li",[t("p",[t("code",[s._v("logstash.yml")])]),s._v(" "),t("ul",[t("li",[t("code",[s._v("xpack.monitoring.elasticsearch.username: logstash")])]),s._v(" "),t("li",[t("code",[s._v("xpack.monitoring.elasticsearch.password: password")])])])])]),s._v(" "),t("p",[s._v("기본 계정/비밀번호")]),s._v(" "),t("ul",[t("li",[s._v("elastic / changeme")]),s._v(" "),t("li",[s._v("kibana / changme")])]),s._v(" "),t("h3",{attrs:{id:"disable-x-pack"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#disable-x-pack"}},[s._v("#")]),s._v(" Disable X-Pack")]),s._v(" "),t("p",[s._v("elasticsearch.yml, kibana.yml and logstash.yml configuration files")]),s._v(" "),t("p",[t("code",[s._v("xpack.security.enabled: false")])]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("Setting")]),s._v(" "),t("th",[s._v("Description")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("xpack.graph.enabled")]),s._v(" "),t("td",[s._v("Set to false to disable X-Pack graph features")])]),s._v(" "),t("tr",[t("td",[s._v("xpack.ml.enabled")]),s._v(" "),t("td",[s._v("Set to false to disable X-Pack machine learning features")])]),s._v(" "),t("tr",[t("td",[s._v("xpack.monitoring.enabled")]),s._v(" "),t("td",[s._v("Set to false to disable X-Pack monitoring features")])]),s._v(" "),t("tr",[t("td",[s._v("xpack.reporting.enabled")]),s._v(" "),t("td",[s._v("Set to false to disable X-Pack reporting features")])]),s._v(" "),t("tr",[t("td",[s._v("xpack.security.enabled")]),s._v(" "),t("td",[s._v("Set to false to disable X-Pack security features")])]),s._v(" "),t("tr",[t("td",[s._v("xpack.watcher.enabled")]),s._v(" "),t("td",[s._v("Set to false to disable Watcher")])])])]),s._v(" "),t("h3",{attrs:{id:"x-pack-user-management-apis"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#x-pack-user-management-apis"}},[s._v("#")]),s._v(" X-Pack User Management APIs")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/6.6/security-api-users.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.elastic.co/guide/en/elasticsearch/reference/6.6/security-api-users.html"),t("OutboundLink")],1)]),s._v(" "),t("h2",{attrs:{id:"logstash"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#logstash"}},[s._v("#")]),s._v(" Logstash")]),s._v(" "),t("p",[s._v("조건식: "),t("a",{attrs:{href:"https://www.elastic.co/guide/en/logstash/current/event-dependent-configuration.html#conditionals",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.elastic.co/guide/en/logstash/current/event-dependent-configuration.html#conditionals"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("정규표현식: "),t("a",{attrs:{href:"https://www.elastic.co/guide/en/beats/filebeat/current/regexp-support.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.elastic.co/guide/en/beats/filebeat/current/regexp-support.html"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("실행 옵션: "),t("a",{attrs:{href:"https://www.elastic.co/guide/en/logstash/6.0/running-logstash-command-line.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.elastic.co/guide/en/logstash/6.0/running-logstash-command-line.html"),t("OutboundLink")],1)]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" /usr/share/logstash/bin/logstash "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --path.settings /etc/logstash/ "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  -f /etc/logstash/conf.d/ --config.reload.automatic "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /var/log/logstash/logstash-stdout.log "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">>")]),s._v(" /v    ar/log/logstash/logstash-stderr.log "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"input"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#input"}},[s._v("#")]),s._v(" input")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.elastic.co/guide/en/logstash/current/input-plugins.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.elastic.co/guide/en/logstash/current/input-plugins.html"),t("OutboundLink")],1)]),s._v(" "),t("h4",{attrs:{id:"beats"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#beats"}},[s._v("#")]),s._v(" beats")]),s._v(" "),t("div",{staticClass:"language-conf line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("beats {\n    port => 9600\n    type => foo-type\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"filter"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#filter"}},[s._v("#")]),s._v(" filter")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.elastic.co/guide/en/logstash/current/filter-plugins.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.elastic.co/guide/en/logstash/current/filter-plugins.html"),t("OutboundLink")],1)]),s._v(" "),t("h4",{attrs:{id:"grok-필터"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#grok-필터"}},[s._v("#")]),s._v(" grok 필터")]),s._v(" "),t("p",[s._v("구조화되지 않은 데이터의 구조를 선언하여 파싱함")]),s._v(" "),t("h4",{attrs:{id:"json-필터"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#json-필터"}},[s._v("#")]),s._v(" json 필터")]),s._v(" "),t("div",{staticClass:"language-conf line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('filter {\n    json {\n        source => "message"\n        target => "message"\n    }\n    json {\n        source => "[message][atts]"\n        target => "[message][atts]"\n    }\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("h3",{attrs:{id:"output"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#output"}},[s._v("#")]),s._v(" output")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.elastic.co/guide/en/logstash/current/output-plugins.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.elastic.co/guide/en/logstash/current/output-plugins.html"),t("OutboundLink")],1)]),s._v(" "),t("h4",{attrs:{id:"elastic-search"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#elastic-search"}},[s._v("#")]),s._v(" elastic search")]),s._v(" "),t("div",{staticClass:"language-conf line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('output {\n    elasticsearch {\n        hosts => ["https://localhost:9200"]\n        index => "logstash-name-%{+YYYY.MM.dd}"\n        user => username\n        password => password\n        ssl => true\n        ssl_certificate_verification => false\n        cacert => "/etc/logstash/root-ca.pem"\n    }\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h3",{attrs:{id:"stdout-for-debug"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#stdout-for-debug"}},[s._v("#")]),s._v(" stdout for debug")]),s._v(" "),t("div",{staticClass:"language-conf line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("output {\n    stdout { codec => rubydebug }\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h2",{attrs:{id:"beats-filebeat-metricbeat-heartbeat"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#beats-filebeat-metricbeat-heartbeat"}},[s._v("#")]),s._v(" Beats (FileBeat, MetricBeat, HeartBeat...)")]),s._v(" "),t("p",[t("code",[s._v("filebeat.yml")])]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# user inputs")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("filebeat.inputs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" log\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("enabled")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("paths")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" /var/log/"),t("span",{pre:!0,attrs:{class:"token important"}},[s._v("*.log")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("include_lines")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'^ERROR'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'^WARN'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("exclude_lines")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'^DEBUG'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[t("code",[s._v("__beat.yml")])]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("output.elasticsearch")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("enabled")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("false")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("output.logstash")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("hosts")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"127.0.0.1:9600"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("queue.mem")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("events")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("flush.min_events")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("flush.timeout")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 30s\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[s._v("HeartBeat 설정: "),t("a",{attrs:{href:"https://www.elastic.co/guide/en/beats/heartbeat/current/heartbeat-reference-yml.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.elastic.co/guide/en/beats/heartbeat/current/heartbeat-reference-yml.html"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"모듈"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#모듈"}},[s._v("#")]),s._v(" 모듈")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("filebeat modules "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("module"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nfilebeat modules disable "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("module"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nfilebeat modules list\n\nmetricbeat modules "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("module"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nmetricbeat modules disable "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("module"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nmetricbeat modules list\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h3",{attrs:{id:"dashboard-설정"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dashboard-설정"}},[s._v("#")]),s._v(" Dashboard 설정")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("filebeat setup -e "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\nmetricbeat setup "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\nheartbeat setup -e "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\n  -E setup.kibana.host"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("localhost:5601 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  -E setup.dashboards.index"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("customname-* "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  -E output.logstash.enabled"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  -E output.elasticsearch.hosts"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'localhost:9200'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  -E output.elasticsearch.username"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("USERNAME "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  -E output.elasticsearch.password"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("PASSWORD "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  -E output.elasticsearch.ssl.verification_mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("none\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 아래의 값을 명시하지 않으면 Elasticsearch output username/password 사용")]),s._v("\n  -E setup.kibana.username"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("username"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  -E setup.kibana.password"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("password"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("h3",{attrs:{id:"template-적용"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#template-적용"}},[s._v("#")]),s._v(" Template 적용")]),s._v(" "),t("p",[s._v("(그다지 추천하는 방법은 아님... -> 기본 템플릿 필드가 모두 들어가버림)")]),s._v(" "),t("p",[s._v("By default, Filebeat automatically loads the recommended template file, fields.yml,\nif the Elasticsearch output is enabled.")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("filebeat setup --template "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\nmetricbeat setup --template "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\nheartbeat setup -e "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\n  -E setup.template.name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("customname "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  -E setup.template.pattern"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("customname-* "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  -E setup.kibana.host"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("localhost:5601 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  -E setup.dashboards.index"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("customname-* "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  -E output.logstash.enabled"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  -E output.elasticsearch.index"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("customname-%"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("+yyyy.MM.dd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  -E output.elasticsearch.hosts"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'localhost:9200'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  -E output.elasticsearch.username"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("USERNAME "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  -E output.elasticsearch.password"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("PASSWORD "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  -E output.elasticsearch.ssl.verification_mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("none\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("h2",{attrs:{id:"curator"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#curator"}},[s._v("#")]),s._v(" Curator")]),s._v(" "),t("h3",{attrs:{id:"설치"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#설치"}},[s._v("#")]),s._v(" 설치")]),s._v(" "),t("p",[t("code",[s._v("pip install elasticsearch-curator")])]),s._v(" "),t("p",[t("code",[s._v("sg_roles.yml")])]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("sg_curator")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("cluster")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" CLUSTER_MONITOR  \n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" CLUSTER_COMPOSITE_OPS_RO\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("indices")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("'logstash-*'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("'*'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" UNLIMITED\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[t("code",[s._v("sg_internal_users.yml")])]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("curator")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("hash")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" $2y$12$Y7znAYZWqJBTJSrT8.iHreCyCVhRE5RQ4dKbbLKXtnutdTE2IP2n.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("code",[s._v("sg_roles_mapping.yml")])]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("sg_curator")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("users")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" curator\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[t("code",[s._v("sg_config.yml")])]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("clientcert_auth_domain")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("enabled")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("order")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("http_authenticator")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" clientcert\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("config")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("username_attribute")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" cn\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("challenge")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("false")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("authentication_backend")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" noop\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("h3",{attrs:{id:"설정"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#설정"}},[s._v("#")]),s._v(" 설정")]),s._v(" "),t("p",[t("code",[s._v("curator.yml")])]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("client")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("hosts")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" 127.0.0.1\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9200")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("url_prefix")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("use_ssl")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("True")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("certificate")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /etc/elasticsearch/config/root"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("ca.pem\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ssl_no_validate")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("True")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("http_auth")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" curator"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("curator\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("timeout")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("master_only")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("False")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h3",{attrs:{id:"실행"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#실행"}},[s._v("#")]),s._v(" 실행")]),s._v(" "),t("ul",[t("li",[s._v("목록보기: "),t("code",[s._v("curator_cli --config ./curator.yml show_indices --verbose")])]),s._v(" "),t("li",[s._v("액션 실행\n"),t("ul",[t("li",[t("code",[s._v("curator --config curator.yml [--run-dry] delete.yml")])]),s._v(" "),t("li",[t("code",[s._v("--run-dry")]),s._v(" 옵션으로 테스트 해볼 수 있음")])])])]),s._v(" "),t("h3",{attrs:{id:"주기적-삭제"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#주기적-삭제"}},[s._v("#")]),s._v(" 주기적 삭제")]),s._v(" "),t("p",[t("code",[s._v("action-delete.yml")])]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("actions")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("action")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" delete_indices\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Delete indices older than 30 days (based on index name)\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("options")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ignore_empty_list")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("True")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("disable_action")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("False")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("filters")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("filtertype")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" pattern\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" prefix\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" logstash"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("filtertype")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" age\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("source")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" name\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("direction")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" older\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("timestring")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%Y.%m.%d'")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("unit")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" days\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("unit_count")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("h2",{attrs:{id:"slackaction"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#slackaction"}},[s._v("#")]),s._v(" SlackAction")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.elastic.co/guide/en/elastic-stack-overview/current/actions-slack.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.elastic.co/guide/en/elastic-stack-overview/current/actions-slack.html"),t("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=n.exports}}]);