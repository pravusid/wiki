(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{393:function(t,r,e){"use strict";e.r(r);var a=e(28),s=Object(a.a)({},(function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"mono-repository-monorepo"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mono-repository-monorepo"}},[t._v("#")]),t._v(" Mono Repository (monorepo)")]),t._v(" "),e("p",[t._v("Mono Repository(이하 monorepo)는 관련 패키지들을 단일 저장소에서 함께 관리하는 방법론이다")]),t._v(" "),e("h2",{attrs:{id:"articles-examples"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#articles-examples"}},[t._v("#")]),t._v(" articles, examples")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("overview")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://monorepo.tools/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://monorepo.tools/"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://d2.naver.com/helloworld/0923884",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://d2.naver.com/helloworld/0923884"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://d2.naver.com/helloworld/7553804",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://d2.naver.com/helloworld/7553804"),e("OutboundLink")],1)])])]),t._v(" "),e("li",[e("p",[t._v("Nx")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://github.com/ddd-by-examples/library-nestjs",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/ddd-by-examples/library-nestjs"),e("OutboundLink")],1)])])]),t._v(" "),e("li",[e("p",[t._v("Turborepo")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://engineering.linecorp.com/ko/blog/monorepo-with-turborepo",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://engineering.linecorp.com/ko/blog/monorepo-with-turborepo"),e("OutboundLink")],1)])])]),t._v(" "),e("li",[e("p",[t._v("Rush")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://medium.com/mildang/rush%EB%A1%9C-%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C-%EB%AA%A8%EB%85%B8%EB%A0%88%ED%8F%AC-%EB%8F%84%EC%9E%85%EA%B8%B0-5da0c5bc9b30",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://medium.com/mildang/rush로-프론트엔드-모노레포-도입기-5da0c5bc9b30"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://dev.to/kkazala/series/17133",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://dev.to/kkazala/series/17133"),e("OutboundLink")],1)])])]),t._v(" "),e("li",[e("p",[t._v("Lerna")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://medium.com/jung-han/lerna-%EB%A1%9C-%EB%AA%A8%EB%85%B8%EB%A0%88%ED%8F%AC-%ED%95%B4%EB%B3%B4%EB%9F%AC%EB%82%98-34c8e008106a",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://medium.com/jung-han/lerna-로-모노레포-해보러나-34c8e008106a"),e("OutboundLink")],1)])])]),t._v(" "),e("li",[e("p",[t._v("Sharing TypeScript with Nx and Turborepo")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://javascript.plainenglish.io/d8d54b805e46",target:"_blank",rel:"noopener noreferrer"}},[t._v("Part 1: An Introduction to Monorepos"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://javascript.plainenglish.io/347bf3194181",target:"_blank",rel:"noopener noreferrer"}},[t._v("Part 2: Creating a Monorepo"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://javascript.plainenglish.io/2e4608701964",target:"_blank",rel:"noopener noreferrer"}},[t._v("Part 3: Configuring a Monorepo"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://javascript.plainenglish.io/a48adc99823e",target:"_blank",rel:"noopener noreferrer"}},[t._v("Part 4: Managing a Monorepo"),e("OutboundLink")],1)])])]),t._v(" "),e("li",[e("p",[t._v("Pnpm and Nx monorepo")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://www.javierbrea.com/blog/pnpm-nx-monorepo-01/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.javierbrea.com/blog/pnpm-nx-monorepo-01/"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://www.javierbrea.com/blog/pnpm-nx-monorepo-02/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.javierbrea.com/blog/pnpm-nx-monorepo-02/"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://www.javierbrea.com/blog/pnpm-nx-monorepo-03/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.javierbrea.com/blog/pnpm-nx-monorepo-03/"),e("OutboundLink")],1)])])])]),t._v(" "),e("h2",{attrs:{id:"vids"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vids"}},[t._v("#")]),t._v(" vids")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://www.youtube.com/watch?v=Bycg5w5qXfE",target:"_blank",rel:"noopener noreferrer"}},[t._v("우리는 하나다! 모노레포 with pnpm"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://www.youtube.com/watch?v=Ix9gxqKOatY",target:"_blank",rel:"noopener noreferrer"}},[t._v("일백개 패키지 모노레포 우아하게 운영하기"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://www.youtube.com/watch?v=CsbBuE_MF2U",target:"_blank",rel:"noopener noreferrer"}},[t._v("모노레포 마이크로 아키텍처를 지향하며"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://www.youtube.com/watch?v=CCo7T3m6LLM",target:"_blank",rel:"noopener noreferrer"}},[t._v("모노레포 희망편 (Feat.Polylith)"),e("OutboundLink")],1)])]),t._v(" "),e("h2",{attrs:{id:"monorepo-in-nodejs"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#monorepo-in-nodejs"}},[t._v("#")]),t._v(" monorepo in nodejs")]),t._v(" "),e("p",[t._v("mororepo 툴이 수행하는 주요기능은 다음과 같다")]),t._v(" "),e("ul",[e("li",[t._v("배포 관리 (publish)")]),t._v(" "),e("li",[t._v("스크립트 실행 (run)")]),t._v(" "),e("li",[t._v("의존성 관리 (root 레벨에서 monorepo 전체 의존성을 관리하는 경우)")]),t._v(" "),e("li",[e("s",[t._v("버전 관리 (version)")]),t._v(" (툴에 따라서 지원하지 않을 수 있음)")])]),t._v(" "),e("h3",{attrs:{id:"version-managers"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#version-managers"}},[t._v("#")]),t._v(" Version Managers")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://github.com/changesets/changesets",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/changesets/changesets"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://nx.dev/recipes/adopting-nx/lerna-and-nx#version-management-&-publishing",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://nx.dev/recipes/adopting-nx/lerna-and-nx#version-management-&-publishing"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://turbo.build/repo/docs/handbook/publishing-packages/versioning-and-publishing",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://turbo.build/repo/docs/handbook/publishing-packages/versioning-and-publishing"),e("OutboundLink")],1)])]),t._v(" "),e("h2",{attrs:{id:"package-managers"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#package-managers"}},[t._v("#")]),t._v(" Package Managers")]),t._v(" "),e("p",[t._v("주요 패키지매니저(npm, pnpm, yarn)들은 워크스페이스 기능을 지원한다.\n워크스페이스 옵션을 지정하면 지정한 경로의 패키지를 우선 참조하여, 패키지를 설치했을 때 "),e("code",[t._v("node_moudles")]),t._v("에 패키지 링크를 생성한다.")]),t._v(" "),e("p",[t._v("각 패키지에서 다른 패키지를 참조할 때 보통 "),e("code",[t._v('"*"')]),t._v("(모든버전)으로 지정한다. (pnpm은 "),e("code",[t._v('"workspace:*"')]),t._v(")")]),t._v(" "),e("div",{staticClass:"language-json line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dependencies"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"other-package"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*"')]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br")])]),e("h3",{attrs:{id:"pnpm-workspace"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pnpm-workspace"}},[t._v("#")]),t._v(" pnpm workspace")]),t._v(" "),e("p",[t._v("[[npm#pnpm]]")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://pnpm.io/workspaces",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://pnpm.io/workspaces"),e("OutboundLink")],1)]),t._v(" "),e("h3",{attrs:{id:"npm-workspace"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#npm-workspace"}},[t._v("#")]),t._v(" npm workspace")]),t._v(" "),e("p",[t._v("[[npm#npm]]")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://docs.npmjs.com/cli/v9/using-npm/workspaces",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://docs.npmjs.com/cli/v9/using-npm/workspaces"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"nx"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nx"}},[t._v("#")]),t._v(" Nx")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://nx.dev/getting-started/intro",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://nx.dev/getting-started/intro"),e("OutboundLink")],1)]),t._v(" "),e("h3",{attrs:{id:"nx-quickstart"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nx-quickstart"}},[t._v("#")]),t._v(" Nx Quickstart")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://turbo.build/repo/docs/getting-started/create-new#quickstart",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://turbo.build/repo/docs/getting-started/create-new#quickstart"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/nrwl/nx-examples",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/nrwl/nx-examples"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/nrwl/nx-recipes",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/nrwl/nx-recipes"),e("OutboundLink")],1)])]),t._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("npx create-nx-workspace --pm "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h2",{attrs:{id:"turborepo"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#turborepo"}},[t._v("#")]),t._v(" Turborepo")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://turbo.build/repo/docs",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://turbo.build/repo/docs"),e("OutboundLink")],1)]),t._v(" "),e("h3",{attrs:{id:"turborepo-quckstart"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#turborepo-quckstart"}},[t._v("#")]),t._v(" Turborepo Quckstart")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://turbo.build/repo/docs/getting-started/create-new#quickstart",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://turbo.build/repo/docs/getting-started/create-new#quickstart"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://turbo.build/repo/docs/getting-started/from-example",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://turbo.build/repo/docs/getting-started/from-example"),e("OutboundLink")],1)])]),t._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("npx create-turbo@latest\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h2",{attrs:{id:"lerna"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#lerna"}},[t._v("#")]),t._v(" lerna")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/lerna/lerna",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/lerna/lerna"),e("OutboundLink")],1)]),t._v(" "),e("blockquote",[e("p",[t._v("monorepo 내의 node_modules 중복이 많아질 수록 lerna의 성능이 좋지 않다")]),t._v(" "),e("p",[t._v("-- "),e("a",{attrs:{href:"https://doppelmutzi.github.io/monorepo-lerna-yarn-workspaces/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://doppelmutzi.github.io/monorepo-lerna-yarn-workspaces/"),e("OutboundLink")],1)])]),t._v(" "),e("p",[t._v("주요 명령어는 다음과 같다")]),t._v(" "),e("h3",{attrs:{id:"init"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#init"}},[t._v("#")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/init#readme",target:"_blank",rel:"noopener noreferrer"}},[t._v("init"),e("OutboundLink")],1)]),t._v(" "),e("blockquote",[e("p",[t._v("Create a new Lerna repo or upgrade an existing repo to the current version of Lerna")])]),t._v(" "),e("h3",{attrs:{id:"bootstrap"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#bootstrap"}},[t._v("#")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/bootstrap#readme",target:"_blank",rel:"noopener noreferrer"}},[t._v("bootstrap"),e("OutboundLink")],1)]),t._v(" "),e("blockquote",[e("p",[t._v("Bootstrap the packages in the current Lerna repo. Installs all of their dependencies and links any cross-dependencies.")])]),t._v(" "),e("h3",{attrs:{id:"version"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#version"}},[t._v("#")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/version#readme",target:"_blank",rel:"noopener noreferrer"}},[t._v("version"),e("OutboundLink")],1)]),t._v(" "),e("blockquote",[e("p",[t._v("Bump version of packages changed since the last release.\nIdentifies packages that have been updated since the previous tagged release")])]),t._v(" "),e("h3",{attrs:{id:"publish"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#publish"}},[t._v("#")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/publish#readme",target:"_blank",rel:"noopener noreferrer"}},[t._v("publish"),e("OutboundLink")],1)]),t._v(" "),e("blockquote",[e("p",[t._v("Publish packages in the current project")])]),t._v(" "),e("h3",{attrs:{id:"run"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#run"}},[t._v("#")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/run#readme",target:"_blank",rel:"noopener noreferrer"}},[t._v("run"),e("OutboundLink")],1)]),t._v(" "),e("blockquote",[e("p",[t._v("Run an npm script in each package that contains that script")])]),t._v(" "),e("h2",{attrs:{id:"monorepo-적용-w-lerna-github-package-registry"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#monorepo-적용-w-lerna-github-package-registry"}},[t._v("#")]),t._v(" monorepo 적용 (w/ lerna, github package registry)")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://viewsource.io/publishing-and-installing-private-github-packages-using-yarn-and-lerna/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://viewsource.io/publishing-and-installing-private-github-packages-using-yarn-and-lerna/"),e("OutboundLink")],1)]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" init\nlerna init --independent\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br")])]),e("p",[t._v("프로젝트 루트에 "),e("code",[t._v("package.json")]),t._v(" 파일과 "),e("code",[t._v("lerna.json")]),t._v(" 설정파일이 생성된다")]),t._v(" "),e("h3",{attrs:{id:"package-json"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#package-json"}},[t._v("#")]),t._v(" "),e("code",[t._v("package.json")])]),t._v(" "),e("h4",{attrs:{id:"root"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#root"}},[t._v("#")]),t._v(" root")]),t._v(" "),e("div",{staticClass:"language-json line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"monorepo"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"private"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"workspaces"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"packages/core"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"packages/*"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scripts"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"build"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lerna run build --stream"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"clean"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lerna run clean --parallel"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"deps"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"yarn exec --workspaces -- ncu"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"deps:update"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"yarn exec --workspaces -- ncu --target minor -u"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"deps:clean"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"find . -name 'node_modules' -type d -prune -print -exec rm -rf '{}' +\"")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"version:all"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lerna version --no-changelog"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"publish:all"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"yarn run clean && yarn run build && lerna publish from-package"')]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br")])]),e("p",[t._v("workspace 목록을 별도 표기하여 빌드 실행 우선순위를 지정할 수 있음\n(이 경우 lerna 커맨드 실행시 패키지 중복오류가 발생할 수 있으므로 전체 경로("),e("code",[t._v("*")]),t._v(")만 사용하고 스크립트 실행등은 lerna run 사용)")]),t._v(" "),e("h4",{attrs:{id:"in-packages"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#in-packages"}},[t._v("#")]),t._v(" in packages")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://docs.npmjs.com/cli/v6/configuring-npm/package-json#repository",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://docs.npmjs.com/cli/v6/configuring-npm/package-json#repository"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("패키지 이름은 "),e("code",[t._v("@scope")]),t._v(" + 워크스페이스 prefix 경로("),e("code",[t._v("packages/*")]),t._v(")를 제외한 패키지로 정의하고")]),t._v(" "),e("p",[t._v("각 패키지의 "),e("code",[t._v("package.json")]),t._v(" 파일에 다음 내용을 추가한다")]),t._v(" "),e("div",{staticClass:"language-json line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  ...\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@scope/package-name-without-workspaces-prefix"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"repository"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"git"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"url"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ssh://git@github.com/idpravus/monorepo.git"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"directory"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"packages/package-name-without-workspaces-prefix"')]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"publishConfig"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"registry"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://npm.pkg.github.com/"')]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  ...\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br")])]),e("h3",{attrs:{id:"lerna-json"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#lerna-json"}},[t._v("#")]),t._v(" "),e("code",[t._v("lerna.json")])]),t._v(" "),e("p",[t._v("다음 내용을 추가한다")]),t._v(" "),e("div",{staticClass:"language-json line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  ...\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"npmClient"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"yarn"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"useWorkspaces"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"command"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"version"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"message"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"release"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ignoreChanges"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"**/*.spec.ts"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"**/*.md"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"publish"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"registry"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://npm.pkg.github.com"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"allowBranch"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"main"')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br")])]),e("h3",{attrs:{id:"monorepo-내부의-다른-모듈-사용"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#monorepo-내부의-다른-모듈-사용"}},[t._v("#")]),t._v(" monorepo 내부의 다른 모듈 사용")]),t._v(" "),e("p",[t._v("다른 모듈을 사용하기 위해서는 "),e("code",[t._v("dependencies")]),t._v(" 선언한 뒤 "),e("code",[t._v("import")]),t._v(" 해서 사용한다")]),t._v(" "),e("h2",{attrs:{id:"rush"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rush"}},[t._v("#")]),t._v(" Rush")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://rushjs.io/pages/intro/get_started/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://rushjs.io/pages/intro/get_started/"),e("OutboundLink")],1)])])}),[],!1,null,null,null);r.default=s.exports}}]);