(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{394:function(t,r,a){"use strict";a.r(r);var e=a(28),s=Object(e.a)({},(function(){var t=this,r=t.$createElement,a=t._self._c||r;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"mono-repository-monorepo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mono-repository-monorepo"}},[t._v("#")]),t._v(" Mono Repository (monorepo)")]),t._v(" "),a("p",[t._v("Mono Repository(이하 monorepo)는 관련 패키지들을 단일 저장소에서 함께 관리하는 방법론이다")]),t._v(" "),a("h2",{attrs:{id:"articles-examples"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#articles-examples"}},[t._v("#")]),t._v(" articles, examples")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("overview")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://monorepo.tools/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://monorepo.tools/"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://d2.naver.com/helloworld/0923884",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://d2.naver.com/helloworld/0923884"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://d2.naver.com/helloworld/7553804",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://d2.naver.com/helloworld/7553804"),a("OutboundLink")],1)])])]),t._v(" "),a("li",[a("p",[t._v("Nx")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/ddd-by-examples/library-nestjs",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/ddd-by-examples/library-nestjs"),a("OutboundLink")],1)])])]),t._v(" "),a("li",[a("p",[t._v("Turborepo")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://engineering.linecorp.com/ko/blog/monorepo-with-turborepo",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://engineering.linecorp.com/ko/blog/monorepo-with-turborepo"),a("OutboundLink")],1)])])]),t._v(" "),a("li",[a("p",[t._v("Rush")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://medium.com/mildang/rush%EB%A1%9C-%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C-%EB%AA%A8%EB%85%B8%EB%A0%88%ED%8F%AC-%EB%8F%84%EC%9E%85%EA%B8%B0-5da0c5bc9b30",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://medium.com/mildang/rush로-프론트엔드-모노레포-도입기-5da0c5bc9b30"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://dev.to/kkazala/series/17133",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://dev.to/kkazala/series/17133"),a("OutboundLink")],1)])])]),t._v(" "),a("li",[a("p",[t._v("Lerna")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://medium.com/jung-han/lerna-%EB%A1%9C-%EB%AA%A8%EB%85%B8%EB%A0%88%ED%8F%AC-%ED%95%B4%EB%B3%B4%EB%9F%AC%EB%82%98-34c8e008106a",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://medium.com/jung-han/lerna-로-모노레포-해보러나-34c8e008106a"),a("OutboundLink")],1)])])]),t._v(" "),a("li",[a("p",[t._v("Sharing TypeScript with Nx and Turborepo")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://javascript.plainenglish.io/d8d54b805e46",target:"_blank",rel:"noopener noreferrer"}},[t._v("Part 1: An Introduction to Monorepos"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://javascript.plainenglish.io/347bf3194181",target:"_blank",rel:"noopener noreferrer"}},[t._v("Part 2: Creating a Monorepo"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://javascript.plainenglish.io/2e4608701964",target:"_blank",rel:"noopener noreferrer"}},[t._v("Part 3: Configuring a Monorepo"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://javascript.plainenglish.io/a48adc99823e",target:"_blank",rel:"noopener noreferrer"}},[t._v("Part 4: Managing a Monorepo"),a("OutboundLink")],1)])])]),t._v(" "),a("li",[a("p",[t._v("Pnpm and Nx monorepo")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.javierbrea.com/blog/pnpm-nx-monorepo-01/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.javierbrea.com/blog/pnpm-nx-monorepo-01/"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.javierbrea.com/blog/pnpm-nx-monorepo-02/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.javierbrea.com/blog/pnpm-nx-monorepo-02/"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.javierbrea.com/blog/pnpm-nx-monorepo-03/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.javierbrea.com/blog/pnpm-nx-monorepo-03/"),a("OutboundLink")],1)])])])]),t._v(" "),a("h2",{attrs:{id:"vids"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vids"}},[t._v("#")]),t._v(" vids")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.youtube.com/watch?v=Bycg5w5qXfE",target:"_blank",rel:"noopener noreferrer"}},[t._v("우리는 하나다! 모노레포 with pnpm"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.youtube.com/watch?v=Ix9gxqKOatY",target:"_blank",rel:"noopener noreferrer"}},[t._v("일백개 패키지 모노레포 우아하게 운영하기"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.youtube.com/watch?v=CsbBuE_MF2U",target:"_blank",rel:"noopener noreferrer"}},[t._v("모노레포_마이크로 아키텍처를 지향하며"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.youtube.com/watch?v=CCo7T3m6LLM",target:"_blank",rel:"noopener noreferrer"}},[t._v("모노레포 희망편 (Feat.Polylith)"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"monorepo-in-nodejs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#monorepo-in-nodejs"}},[t._v("#")]),t._v(" monorepo in nodejs")]),t._v(" "),a("p",[t._v("mororepo 툴이 수행하는 주요기능은 다음과 같다")]),t._v(" "),a("ul",[a("li",[t._v("버전 관리 (version)")]),t._v(" "),a("li",[t._v("배포 관리 (publish)")]),t._v(" "),a("li",[t._v("스크립트 실행 (run)")]),t._v(" "),a("li",[t._v("의존성 관리 (root 레벨에서 monorepo 전체 의존성을 관리하는 경우)")])]),t._v(" "),a("h2",{attrs:{id:"packagemanagers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#packagemanagers"}},[t._v("#")]),t._v(" PackageManagers")]),t._v(" "),a("p",[t._v("주요 패키지매니저(npm, pnpm, yarn)들은 워크스페이스 기능을 지원한다.\n워크스페이스 옵션을 지정하면 지정한 경로의 패키지를 우선 참조하여, 패키지를 설치했을 때 "),a("code",[t._v("node_moudles")]),t._v("에 패키지 링크를 생성한다.")]),t._v(" "),a("p",[t._v("각 패키지에서 다른 패키지를 참조할 때 보통 "),a("code",[t._v('"*"')]),t._v("(모든버전)으로 지정한다. (pnpm은 "),a("code",[t._v('"workspace:*"')]),t._v(")")]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dependencies"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"other-package"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("h3",{attrs:{id:"pnpm-workspace"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pnpm-workspace"}},[t._v("#")]),t._v(" pnpm workspace")]),t._v(" "),a("p",[t._v("[[npm#pnpm]]")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://pnpm.io/workspaces",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://pnpm.io/workspaces"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"npm-workspace"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#npm-workspace"}},[t._v("#")]),t._v(" npm workspace")]),t._v(" "),a("p",[t._v("[[npm#npm]]")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://docs.npmjs.com/cli/v9/using-npm/workspaces",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://docs.npmjs.com/cli/v9/using-npm/workspaces"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"nx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nx"}},[t._v("#")]),t._v(" Nx")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://nx.dev/getting-started/intro",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://nx.dev/getting-started/intro"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"nx-quickstart"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nx-quickstart"}},[t._v("#")]),t._v(" Nx Quickstart")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://turbo.build/repo/docs/getting-started/create-new#quickstart",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://turbo.build/repo/docs/getting-started/create-new#quickstart"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/nrwl/nx-examples",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/nrwl/nx-examples"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/nrwl/nx-recipes",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/nrwl/nx-recipes"),a("OutboundLink")],1)])]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("npx create-nx-workspace --pm "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h2",{attrs:{id:"turborepo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#turborepo"}},[t._v("#")]),t._v(" Turborepo")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://turbo.build/repo/docs",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://turbo.build/repo/docs"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"turborepo-quckstart"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#turborepo-quckstart"}},[t._v("#")]),t._v(" Turborepo Quckstart")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://turbo.build/repo/docs/getting-started/create-new#quickstart",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://turbo.build/repo/docs/getting-started/create-new#quickstart"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://turbo.build/repo/docs/getting-started/from-example",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://turbo.build/repo/docs/getting-started/from-example"),a("OutboundLink")],1)])]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("npx create-turbo@latest\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h2",{attrs:{id:"lerna"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lerna"}},[t._v("#")]),t._v(" lerna")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/lerna/lerna",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/lerna/lerna"),a("OutboundLink")],1)]),t._v(" "),a("blockquote",[a("p",[t._v("monorepo 내의 node_modules 중복이 많아질 수록 lerna의 성능이 좋지 않다")]),t._v(" "),a("p",[t._v("-- "),a("a",{attrs:{href:"https://doppelmutzi.github.io/monorepo-lerna-yarn-workspaces/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://doppelmutzi.github.io/monorepo-lerna-yarn-workspaces/"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("주요 명령어는 다음과 같다")]),t._v(" "),a("h3",{attrs:{id:"init"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#init"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/init#readme",target:"_blank",rel:"noopener noreferrer"}},[t._v("init"),a("OutboundLink")],1)]),t._v(" "),a("blockquote",[a("p",[t._v("Create a new Lerna repo or upgrade an existing repo to the current version of Lerna")])]),t._v(" "),a("h3",{attrs:{id:"bootstrap"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bootstrap"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/bootstrap#readme",target:"_blank",rel:"noopener noreferrer"}},[t._v("bootstrap"),a("OutboundLink")],1)]),t._v(" "),a("blockquote",[a("p",[t._v("Bootstrap the packages in the current Lerna repo. Installs all of their dependencies and links any cross-dependencies.")])]),t._v(" "),a("h3",{attrs:{id:"version"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#version"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/version#readme",target:"_blank",rel:"noopener noreferrer"}},[t._v("version"),a("OutboundLink")],1)]),t._v(" "),a("blockquote",[a("p",[t._v("Bump version of packages changed since the last release.\nIdentifies packages that have been updated since the previous tagged release")])]),t._v(" "),a("h3",{attrs:{id:"publish"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#publish"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/publish#readme",target:"_blank",rel:"noopener noreferrer"}},[t._v("publish"),a("OutboundLink")],1)]),t._v(" "),a("blockquote",[a("p",[t._v("Publish packages in the current project")])]),t._v(" "),a("h3",{attrs:{id:"run"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#run"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/run#readme",target:"_blank",rel:"noopener noreferrer"}},[t._v("run"),a("OutboundLink")],1)]),t._v(" "),a("blockquote",[a("p",[t._v("Run an npm script in each package that contains that script")])]),t._v(" "),a("h2",{attrs:{id:"monorepo-적용-w-lerna-github-package-registry"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#monorepo-적용-w-lerna-github-package-registry"}},[t._v("#")]),t._v(" monorepo 적용 (w/ lerna, github package registry)")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://viewsource.io/publishing-and-installing-private-github-packages-using-yarn-and-lerna/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://viewsource.io/publishing-and-installing-private-github-packages-using-yarn-and-lerna/"),a("OutboundLink")],1)]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" init\nlerna init --independent\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[t._v("프로젝트 루트에 "),a("code",[t._v("package.json")]),t._v(" 파일과 "),a("code",[t._v("lerna.json")]),t._v(" 설정파일이 생성된다")]),t._v(" "),a("h3",{attrs:{id:"package-json"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#package-json"}},[t._v("#")]),t._v(" "),a("code",[t._v("package.json")])]),t._v(" "),a("h4",{attrs:{id:"root"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#root"}},[t._v("#")]),t._v(" root")]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"monorepo"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"private"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"workspaces"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"packages/core"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"packages/*"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"build"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lerna run build --stream"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"clean"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lerna run clean --parallel"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"deps"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"yarn exec --workspaces -- ncu"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"deps:update"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"yarn exec --workspaces -- ncu --target minor -u"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"deps:clean"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"find . -name 'node_modules' -type d -prune -print -exec rm -rf '{}' +\"")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"version:all"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lerna version --no-changelog"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"publish:all"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"yarn run clean && yarn run build && lerna publish from-package"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br")])]),a("p",[t._v("workspace 목록을 별도 표기하여 빌드 실행 우선순위를 지정할 수 있음\n(이 경우 lerna 커맨드 실행시 패키지 중복오류가 발생할 수 있으므로 전체 경로("),a("code",[t._v("*")]),t._v(")만 사용하고 스크립트 실행등은 lerna run 사용)")]),t._v(" "),a("h4",{attrs:{id:"in-packages"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#in-packages"}},[t._v("#")]),t._v(" in packages")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://docs.npmjs.com/cli/v6/configuring-npm/package-json#repository",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://docs.npmjs.com/cli/v6/configuring-npm/package-json#repository"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("패키지 이름은 "),a("code",[t._v("@scope")]),t._v(" + 워크스페이스 prefix 경로("),a("code",[t._v("packages/*")]),t._v(")를 제외한 패키지로 정의하고")]),t._v(" "),a("p",[t._v("각 패키지의 "),a("code",[t._v("package.json")]),t._v(" 파일에 다음 내용을 추가한다")]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  ...\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@scope/package-name-without-workspaces-prefix"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"repository"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"git"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"url"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ssh://git@github.com/idpravus/monorepo.git"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"directory"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"packages/package-name-without-workspaces-prefix"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"publishConfig"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"registry"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://npm.pkg.github.com/"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  ...\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br")])]),a("h3",{attrs:{id:"lerna-json"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lerna-json"}},[t._v("#")]),t._v(" "),a("code",[t._v("lerna.json")])]),t._v(" "),a("p",[t._v("다음 내용을 추가한다")]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  ...\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"npmClient"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"yarn"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"useWorkspaces"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"command"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"version"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"message"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"release"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ignoreChanges"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"**/*.spec.ts"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"**/*.md"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"publish"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"registry"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://npm.pkg.github.com"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"allowBranch"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"main"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br")])]),a("h3",{attrs:{id:"monorepo-내부의-다른-모듈-사용"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#monorepo-내부의-다른-모듈-사용"}},[t._v("#")]),t._v(" monorepo 내부의 다른 모듈 사용")]),t._v(" "),a("p",[t._v("다른 모듈을 사용하기 위해서는 "),a("code",[t._v("dependencies")]),t._v(" 선언한 뒤 "),a("code",[t._v("import")]),t._v(" 해서 사용한다")]),t._v(" "),a("h2",{attrs:{id:"rush"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rush"}},[t._v("#")]),t._v(" Rush")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://rushjs.io/pages/intro/get_started/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://rushjs.io/pages/intro/get_started/"),a("OutboundLink")],1)])])}),[],!1,null,null,null);r.default=s.exports}}]);